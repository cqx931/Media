!function(){"undefined"==typeof gigya.services.socialize.plugins&&(gigya.services.socialize.plugins={});var _pi=gigya.services.socialize.plugins,privateScope={get:function(e,o){var t=document.createElement("script");t.src=e,t.charset="UTF-8",t.setAttribute("async","async"),t.onreadystatechange=function(){("loaded"==t.readyState||"complete"==t.readyState)&&(t.onreadystatechange=null,o&&o())},t.onload=t.onerror=function(){t.onload=null,o&&o()};var n=document.getElementsByTagName("head")[0];gigya.utils.functions.invokeOnPageLoad(function(){(n||document.body||document.documentElement).appendChild(t)},!0)},getCacheKey:function(e,o){return"getProviderShareCount_"+e.toLowerCase()+"_"+encodeURIComponent(o)},getProviderResponse:function(e,o,t,n){e=e.toLowerCase(),gigya.utils.sessionCache.get(privateScope.getCacheKey(e,o),n,function(n){null!=n?t(n,e,!1,!0,o):privateScope.getProviderShareCount(e,o,t)})},getProviderShareCount:function(provider,url,callback){var jsonpURL;provider=provider.toLowerCase();var callbackName="gig_pc_"+provider+"_"+(new Date).getTime()+"_"+Math.random().toString().split(".")[1],countField,encodedURL=encodeURIComponent(url);switch(provider){case"vkontakte":jsonpURL="https://vk.com/share.php?act=count&index=1&url="+encodedURL;break;case"facebook":jsonpURL="https://graph.facebook.com/fql?q=SELECT%20total_count%20FROM%20link_stat%20WHERE%20url=%22"+encodedURL+"%22&callback="+callbackName,countField=".data[0].total_count";break;case"twitter":jsonpURL="http://cdn.api.twitter.com/1/urls/count.json?url="+encodedURL+"&callback="+callbackName,"https:"==document.location.protocol&&(jsonpURL=jsonpURL.replace("http:","https:")),countField=".count";break;case"delicious":jsonpURL="http://feeds.delicious.com/v2/json/urlinfo/data?url="+encodedURL+"&callback="+callbackName,countField="[0].total_posts";break;case"stumbleupon":jsonpURL="http://www.stumbleupon.com/services/1.1/badge.getinfo?url="+encodedURL+"&format=jsonp&callback="+callbackName,countField=".result.views";break;case"pinterest":jsonpURL="http://api.pinterest.com/v1/urls/count.json?url="+encodedURL+"&callback="+callbackName,countField=".count";break;case"linkedin":jsonpURL="https://www.linkedin.com/countserv/count/share?format=jsonp&url="+encodedURL+"&callback="+callbackName,countField=".count"}if("https:"==document.location.protocol&&0==jsonpURL.indexOf("http:")&&(jsonpURL=null),jsonpURL){if(window[callbackName]=function(res){var count;try{count=eval("res"+countField)}catch(ex){}(!count||isNaN(count))&&(count=0),callback(count,provider,null,null,url),window[callbackName]=null},"vkontakte"==provider){window.VK=window.VK||{},window.VK.Share=window.VK.Share||{};var origCount=window.VK.Share.count;window.VK.Share.count=function(e,o){callback(o,provider,null,null,url),window[callbackName]=null,origCount&&(window.VK.Share.count=origCount)}}this.get(jsonpURL,function(){window[callbackName]&&(callback(0,provider,!0,null,url),window[callbackName]=null)})}else callback(0,provider,null,null,url)}};_pi.shareCounts={getProviderShareCounts:function(e){var o=[{name:"facebook"},{name:"twitter"},{name:"delicious"},{name:"stumbleUpon"},{name:"pinterest"},{name:"linkedin"},{name:"vkontakte"}],t=e.enabledProviders?e.enabledProviders:"*",n=e.disabledProviders?e.disabledProviders:"",a=gigya.services.socialize.getProvidersByName(t,o);a=gigya.services.socialize.hideProvidersByName(a,n,o);for(var c=0,r={errorCode:0,errorMessage:"",operation:"getProviderShareCounts",context:e.context,shareCounts:{}},l=e.cacheTimeout,i=0;i<a.length;i++){var s=e[a[i].name.toLowerCase()+"URL"];if(s||(s=e.URL),!s)for(var u=document.getElementsByTagName("meta"),d=0;d<u.length;d++)if("og:url"==u[d].getAttribute("property")&&u[d].getAttribute("content")){s=u[d].getAttribute("content");break}s||(s=document.location.href);var p=function(o,t,n,l,i){l||gigya.utils.sessionCache.set(privateScope.getCacheKey(t,i),o),r.shareCounts[t]=parseInt(o),c++,c==a.length&&e.callback&&e.callback(r)};privateScope.getProviderResponse(a[i].name,s,p,l)}}}}();