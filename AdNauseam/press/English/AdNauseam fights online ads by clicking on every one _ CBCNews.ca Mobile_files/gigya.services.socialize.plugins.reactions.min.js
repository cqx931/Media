// Injected language object
if (!gigya.i18n) gigya.i18n = { };
if (!gigya.i18n['gigya.services.socialize.plugins.reactions.js']) gigya.i18n['gigya.services.socialize.plugins.reactions.js'] = { };
gigya.i18n['gigya.services.socialize.plugins.reactions.js']['en'] = {"print": "Print", "comments": "Comments", "lineit": "LINE it!", "share": "Share", "email": "Email"};
// End injected language object

gigya._.UI.registerPlugin(function() {
gigya = window.gigya;
!function(){"undefined"==typeof gigya.services.socialize.plugins&&(gigya.services.socialize.plugins={});var t=gigya.services.socialize.plugins,e="reactions";if("undefined"==typeof t[e]){var n={instances_size:0,bookmarks:"Facebook,Twitter,Google,LinkedIn,Digg,Messenger,VKontakte,Spiceworks,Viadeo,nk.pl,Xing,Tuenti,Delicious,Google Bookmarks,Baidu,FriendFeed,Tumblr,Pinterest,StumbleUpon,Skyrock,QQ,Sina,Kaixin,Renren,VZNet,Share,Email,facebook-like,facebook-send,facebook-subscribe,facebook-share,google-plusone,twitter-tweet,Comments,Reddit,Mixi,Naver,pinterest-pinit,twitter-hashtag,twitter-mention,Print,Foursquare,Foursquare-save,googlePlus-share,moshare-sms,getglue,Kindle,Hatena-bookmark,lineit,Wanelo,WhatsApp",createBookmarksObject:function(t){t.bookmarkSitesArray=[],t.bookmarkSitesHash={};var e=this.bookmarks.split(","),n=this.bookmarks.replace(",Google,",",googleplus,").replace(/ /g,"").replace(/!/g,"").replace(/\./g,"").replace(/\+/g,"plus").toLowerCase().split(",");e.push("Google"),n.push("googleplus-interactive");for(var i=0;i<e.length;i++){var o=t.TEXT(n[i]);o||(o=e[i]);var a={name:n[i],displayName:o,toString:function(){return this.name}};t.bookmarkSitesArray.push(a),t.bookmarkSitesHash[name]=a}},reactionsPlugin:function(t,e,n){this._c=t,this._p=e,this._i=n,this._elid=e.containerID,this._barID=this._p.barID;var i=e.deviceType?e.deviceType.toLowerCase():"desktop";this.isMobileUI="mobile"==i||"auto"==i&&gigya.localInfo.isMobile},createInstance:function(i,o,a){var s=document.getElementById(o.containerID);if(null!=s){s.innerHTML="";var r=new n.reactionsPlugin(i,o,a);r.lang=o.lang,n.createBookmarksObject(r),t[e].instances[o.containerID]=r,n.instances_size++,r.draw()}},createDefaultTemplates:function(){var t={_map:{},get:function(t){return this._map[t]},set:function(t,e){this._map[t]=e instanceof Array?e.join(""):e}};return t.set("button",['<div class="gig-button gig-$buttonType-button gig-button-up gig-button-count-${showCounts}" id="$id" title="$tooltip" alt="$tooltip"  onclick="$onClick" onmouseover="$onMouseOver" onmouseout="$onMouseOut"><table cellpadding="0" cellspacing="0"><tr>','<td id="$id-left">$elButtonLeftImg</td>',"$iconTD","$textTD",'<td id="$id-right">$elButtonRightImg</td>',"</tr></table></div>"]),t.set("newButton",['<a class="gig-bar-button gig-$buttonType-bar-button">','<div class="gig-bar-button-icon gig-$buttonType-bar-button-icon">$elIconImg</div>','<span class="gig-bar-button-text gig-$buttonType-bar-button-text">$text</span>',"</a>"]),t.set("textTD",['<td id="$id-text" style="vertical-align:middle;background-repeat:repeat-x;$buttonCenterBGStyle">','<div class="gig-button-text gig-$buttonType-button-text">$text</div>',"</td>"]),t.set("iconTD",['<td id="$id-icon" style="zoom:1;vertical-align:middle;text-align:left;background-repeat:repeat-x;$buttonCenterBGStyle">$elIconImg</td>']),t.set("countContainer",['<div class="gig-counter gig-$buttonType-counter gig-counter-${rid} gig-counter-${showCounts}" id="$countId" style="display:none; ${countBgStyle};text-align:center;vertical-align:middle;">',"$count","</div>"]),t.set("count",['<span class="$counterTextClass" id="$countId-value">$countValue</span>']),t.set("buttonCell",['<td style="vertical-align:$cellValign; white-space:nowrap;zoom:1;"><div class="$className">$buttonContainer</div></td>']),t.set("buttonWithoutCell",['<div class="$className">$buttonContainer</div>']),t.set("buttonRow",['<tr><td style="position:relative;zoom:1;"><div class="$className">$buttonContainer</div></td></tr>']),t.set("buttonWithoutCount",["$button"]),t.set("buttonWithCountTop",['<table cellspacing="0" cellpadding="0">','<tr><td style="text-align:center" align="center">$countContainer</td></tr>','<tr><td class="gig-button-td"  style="text-align:center">$button</td></tr>',"</table>"]),t.set("buttonWithCountRight",['<table cellspacing="0" cellpadding="0"><tr>','<td class="gig-button-td">$button</td>',"<td>$countContainer</td>","</tr></table>"]),t.set("image",['<img id="$imgId" src="$src" alt="" />']),t.set("imageWithSize",['<img id="$imgId" src="$src" width="$size" height="$size" alt="" />']),t.set("facebookLikeButton",['<div id="$containerID"><div class="fb-like" style="zoom:1" data-width="$width" data-send="false" data-show-faces="false" data-ref="$ref" data-href="$href" data-layout="$layout" data-action="$action" data-gig-btnid="$id" data-colorscheme="$colorscheme" data-font="$font"></div></div>']),t.set("facebookSendButton",['<div id="$containerID"><div class="fb-send" data-ref="$ref" data-href="$href" data-colorscheme="$colorscheme" data-font="$font"></div></div>']),t.set("facebookShareButton",['<div id="$containerID"><div class="fb-share-button" data-ref="$ref" data-href="$href" data-type="$layout" data-width="$width"></div></div>']),t.set("facebookSubscribeButton",['<div id="$containerID"><div class="fb-subscribe" data-height="80" data-width="$width" data-show-faces="false" data-href="$href" data-layout="$layout" data-gig-btnid="$id" data-colorscheme="$colorscheme" data-font="$font"></div></div>']),t.set("googlePlusOneButton",['<div id="$containerID" style="line-height:1px;"><div class="g-plusone" data-href="$href" data-size="$size" data-callback="$callback" data-annotation="$annotation" data-width="$width"></div></div>']),t.set("googlePlusShareButton",['<div id="$containerID" style="line-height:1px;"><div class="g-plus" data-action="share" data-href="$href" data-onendinteraction="$callback" data-annotation="$annotation" data-height="$height" data-width="$width"></div></div>']),t.set("twitterTweetButton",['<div id="$containerID" style="min-width:${width}px"><a href="$twitterHref" class="$twitterClass" data-url="$href" data-via="$via" data-size="$size" ','data-text="$defaultText" data-count="$count" data-counturl="$countURL" data-lang="$lang" data-related="$related" ></a></div>']),t.set("pinterestPinitButton",['<div id="$containerID"><a href="http://pinterest.com/pin/create/button/?url=${href}&media=${thumbnailURL}&description=${description}" class="pin-it-buttona" count-layout="${count}" ${shape} ><img border="0" src="${imgName}" title="Pin It" /></a></div>']),t.set("moshareSmsButton",['<a href="http://www.mogreet.com/moshare/it/" class="${moshareClass}" data-title="${title}" data-message="${description}" data-thumbnail="${thumbnailURL}"></a>']),t.set("getglueButton",['<a class="glue-checkin-widget" href="$href" data-type="$type" data-message="$message" data-title="$title" data-callback="$callbackId"></a>']),t.set("hatenaBookmarkButton",['<div id="$containerID">','<a href="$protocol//b.hatena.ne.jp/entry/$href"',' class="hatena-bookmark-button"',' data-hatena-bookmark-title="$title"',' data-hatena-bookmark-layout="$layout"',' data-hatena-bookmark-lang="$lang" title="ブックマーク">','<img src="$protocol//b.st-hatena.com/images/entry-button/button-only@2x.png" alt="" width="20" height="20" style="border: none;" />',"</a>","</div>"]),t.set("lineitShareButton",['<div id="$containerID">','     <a href="http://line.naver.jp/R/msg/text/?$title%0a$href">','         <img src="$imgUrl" width="$w" height="$h" alt="$alt" />',"     </a>","</div>"]),t},defaultCss:[".gig-bar-container *, div.gig-reactions-container, .gig-reactions-container span, .gig-reactions-container a:hover, .gig-reactions-container a:visited, .gig-reactions-container a:link, .gig-reactions-container a:active{","font-size:12px;border:none; padding:0px;margin:0px;color:inherit;text-decoration:none;width:auto;float:none;-moz-border-radius:0;border-radius:0;","font-family:arial;font-size:10px;color:#4D4D4D;background:none}","table.gig-reactions-container{border-collapse:separate;}","div.gig-button-container {padding:0 5px 0 0; display:inline-block;vertical-align:top;margin-bottom:5px;} ","div.gig-button-container-vertical {padding:0 0 5px 0}","div.gig-button {cursor:pointer;}","div.gig-button-disabled {cursor:default;}","div.gig-counter{margin:0 auto;position:relative;zoom:1;}","span.gig-counter-text{display:block;position:relative;font-weight:bold;zoom:1}","td.gig-button-td{vertical-align:middle}","*.gig-bar-container img {display:block}","div.gig-button-container-twitter-tweet iframe,div.gig-button-container-twitter-hashtag iframe,div.gig-button-container-twitter-mention iframe {display:block}","div.gig-button-container-pinterest-pinit {height:20px;}","div.gig-button-container-pinterest-pinit a {cursor: pointer;}","div.gig-button-container-pinterest-pinit.gig-button-container-count-right {width:80px;}","div.gig-button-container-pinterest-pinit.gig-button-container-count-top.gig-button-container-vertical {position:relative;height:50px;}","div.gig-button-container-pinterest-pinit.gig-button-container-count-top.gig-button-container-vertical > div {position:absolute;bottom:2px;}","div.gig-counter-top {margin-bottom: 1px;}","div.gig-counter-right {margin-left: 1px;}","div.gig-button-count-top table {margin:0 auto;text-align:center;}","div.gig-bar-button-icon {position:absolute;padding-top:1px;}","span.gig-bar-button-text {padding-left:19px;white-space:nowrap;zoom:1;}","a.gig-bar-button,a:hover.gig-bar-button,a:link.gig-bar-button,a:active.gig-bar-button,a:visited.gig-bar-button {","white-space:nowrap;line-height: 18px;position:relative;border-radius: 3px; color:#4d4d4d;cursor:pointer;","font-size: 11px;padding: 0 5px; border: 1px solid #C5C7C7;display:inline-block;zoom:1;vertical-align:middle; text-align:center;","}","a.gig-bar-button,a:link.gig-bar-button,a:active.gig-bar-button,a:visited.gig-bar-button {",'background: #FFFFFF; filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="#FFFFFF", endColorstr="#EAEBEB");',"background: -webkit-gradient(linear, left top, left bottom, from(#FFFFFF), to(#EAEBEB));","background: -moz-linear-gradient(top,  #FFFFFF,  #EAEBEB)}","a:hover.gig-bar-button, a.gig-bar-button-down,a:link.gig-bar-button-down,a:active.gig-bar-button-down,a:visited.gig-bar-button-down {",'background: #EAEBEB; filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="#EAEBEB", endColorstr="#FFFFFF");',"background: -webkit-gradient(linear, left top, left bottom, from(#EAEBEB), to(#FFFFFF));","background: -moz-linear-gradient(top,  #EAEBEB,  #FFFFFF)}"],nonMobileCss:["div.gig-button-text {white-space:nowrap;font-size:11px;color:#333333; padding: 0 3px 0 3px;}","span.gig-counter-text-right{left:1px;font-size:11px;line-height:20px;}","span.gig-counter-text-top{top:-2px;font-size:14px}","div.gig-button-container-facebook-like-count-right {height:20px}","div.gig-button-container-facebook-like-count-top {height:62px}","div.gig-button-container-facebook-send {height:20px}"],mobileCss:[".gig-bar-container * {font-size: 16px;-webkit-text-size-adjust:none; -webkit-touch-callout: none; -webkit-user-select: none;font-family:sans-serif}",".gig-bar-container {overflow:auto;}","div.gig-button-text {white-space:nowrap;font-size:15px;color:#333333; padding: 0 3px 0 3px;}","span.gig-counter-text-right{left:1px;font-size:14px;line-height:35px;}","span.gig-counter-text-top{top:-2px;font-size:18px}"]};n.providerSupportsCounter=function(t){switch(t){case"digg":case"delicious":case"share":case"twitter":case"stumbleupon":case"facebook":case"comments":case"facebook-like":case"facebook-send":case"facebook-subscribe":case"facebook-share":case"google-plusone":case"googleplus-share":case"moshare-sms":case"twitter-tweet":case"twitter-hashtag":case"twitter-mention":case"pinterest":case"pinterest-pinit":case"linkedin":case"getglue":case"hatena-bookmark":case"vkontakte":return!0}return!1};var i=function(){return function(t){this.button=t,this.item=this.getItem()}};n.ButtonItem={generic:i(),"facebook-subscribe":i(),"facebook-send":i(),"facebook-share":i(),"facebook-like":i(),"google-plusone":i(),"googleplus-share":i(),"googleplus-interactive":i(),"moshare-sms":i(),getglue:i(),"twitter-tweet":i(),"twitter-hashtag":i(),"twitter-mention":i(),comments:i(),foursquare:i(),"foursquare-save":i(),"pinterest-pinit":i(),kindle:i(),"hatena-bookmark":i(),lineit:i()},n.ButtonItem.generic.prototype.getItem=function(){var t=this.button,e=t.plugin.spriteRenderer.button,n=t.plugin.spriteRenderer.icons,i=gigya.utils.object.clone(t.oButton);i.onClick=gigya.utils.DOM.attributeEncode(t.getRefString()+".onClick()");var o=gigya.utils.object.clone(t.plugin.buttonImages);t.noButtonBorders&&(o={countBGImg:o.countBGImg}),i.buttonLeftImg=o["buttonLeftImg"+t.state],i.buttonCenterBGImg=o["buttonCenterBGImg"+t.state],i.buttonRightImg=o["buttonRightImg"+t.state],o.countBGImg?(i.countBGImg=o.countBGImg,i.countBgStyle="background-image:url('$countBGImg');background-repeat:no-repeat;"):i.countBgStyle=t.plugin.spriteRenderer.count.getStyleString("default"),i.count="",i.iconImg=i.iconImgUp?i.iconImgUp:i.defaultIconImgUp;var a=t.id.split("-")[0];i.elButtonLeftImg=t.noButtonBorders?"":t.getButtonImageHTML("left-up","buttonLeftImgUp","left",e,o),i.elButtonRightImg=t.noButtonBorders?"":t.getButtonImageHTML("right-up","buttonRightImgUp","right",e,o),i.elIconImg=t.getButtonImageHTML(a,"iconImgUp","icon",n,i,t.iconSize),i.iconTD=t.plugin.templates.get("iconTD"),i.buttonCenterBGImg||(i.buttonCenterBGImg=""),i.countCenterBGImg||(i.countCenterBGImg=""),i.buttonCenterBGStyle=""==i.buttonCenterBGImg?"":"background-image:url('"+i.buttonCenterBGImg+"')",t.labelText&&""!=t.labelText?(i.text=t.labelText,i.textTD=t.plugin.templates.get("textTD")):(i.text="",i.textTD=""),i.tooltip||(i.tooltip=""),i.buttonType=t.plugin._i.buttonsType,i.onMouseOver=t.getRefString()+".changeState('over')",i.onMouseOut=t.getRefString()+".changeState('up')",i.button=t.plugin.templates.get("button"),i.countContainer=t.plugin.templates.get("countContainer"),i.showCounts=t.showCounts,i.count=t.plugin.templates.get("count"),i.countId="$id-count",i.countValue="",i.cellValign="bottom";var s=t.plugin._p.showCounts;switch(s&&(s=s.toLowerCase()),s||(s="right"),gigya.utils.validation.isExplicitTrue((t.plugin._p.iconsOnly||t.noButtonBorders)&&"right"==s)&&(i.cellValign="middle"),t.showCounts){case"right":i.counterTextClass="gig-counter-text gig-$buttonType-counter-text gig-counter-text-right gig-$buttonType-counter-text-right",i.buttonContainer=t.plugin.templates.get("buttonWithCountRight");break;case"top":i.counterTextClass="gig-counter-text gig-$buttonType-counter-text gig-counter-text-top gig-$buttonType-counter-text-top",i.buttonContainer=t.plugin.templates.get("buttonWithCountTop");break;case"none":default:i.buttonContainer=t.plugin.templates.get("buttonWithoutCount")}return t.plugin.usingCountTemplate&&(i.counterTextClass=""),i},n.ButtonItem["facebook-like"].prototype={getItem:function(){var t=this.button,e="none"==t.showCounts?"standard":"top"==t.showCounts?"box_count":"button_count",n=gigya._.apiAdapter.getTokenParam(t.plugin._c.APIKey,"UUID"),i={uu:n,s:t.plugin._p.source,p:t.id},o={id:t.containerID+(new Date).getTime(),buttonType:"share",className:this.className+" gig-facebookLikeButton-"+e,buttonContainer:t.plugin.templates.get("facebookLikeButton"),layout:t.oButton.layout||e,action:t.oButton.action?t.oButton.action:"like",colorscheme:t.oButton.colorscheme?t.oButton.colorscheme:"",font:t.oButton.font?t.oButton.font:"",containerID:t.containerID,ref:gigya.utils.keyValue.serialize(i,":"),width:t.oButton.width?t.oButton.width:55,href:t.getShareURL()};return"facebook-send"==t.id?o.buttonContainer=t.plugin.templates.get("facebookSendButton"):"facebook-subscribe"==t.id?o.buttonContainer=t.plugin.templates.get("facebookSubscribeButton"):"facebook-share"==t.id&&(o.layout="none"==t.showCounts?"button":"top"==t.showCounts?"box_count":"button_count",o.buttonContainer=t.plugin.templates.get("facebookShareButton")),this.id=o.id,o},render:function(){var t=this.button,e=this.id;gigya.external.facebook.initializedTime||gigya.external.facebook.load(!0);var i=gigya.thisScript.lang.full.replace("-","_");gigya.utils.script.load(document.location.protocol+"//connect.facebook.net/"+i+"/sdk.js",null,function(){if("undefined"!=typeof FB){if(FB.XFBML&&FB.XFBML.parse){var i=document.getElementById(t.containerID);i&&gigya.utils.functions.invokeOnPageLoad(function(){window.setTimeout(function(){""==i.firstChild.innerHTML&&FB.XFBML.parse(i)},100)})}!FB.Event||!FB.Event.subscribe||"facebook-send"==t.id&&n.addedFBSendEvent||("facebook-send"==t.id&&(n.addedFBSendEvent=!0),FB.Event.subscribe("facebook-send"==t.id?"message.send":"edge.create",function(n,i){if(i.getAttribute("data-gig-btnid")==e||"facebook-send"==t.id){var o={eventName:"sendDone",providers:t.plugin._p.facebookLikeButton&&"facebook-like"==t.id?"facebookLike":t.id,userMessage:"",targetURL:n};gigya.events.dispatchForWidget(o,t.plugin._p),t.plugin.reportShare(t.id,n)}}))}},!0)}},n.ButtonItem["facebook-send"]=n.ButtonItem["facebook-like"],n.ButtonItem["facebook-subscribe"]=n.ButtonItem["facebook-like"],n.ButtonItem["facebook-share"]=n.ButtonItem["facebook-like"],n.ButtonItem["google-plusone"].prototype={getItem:function(){var t=this.button.plugin,e=this.button,n={buttonType:"share",buttonContainer:this.button.plugin.templates.get("googlePlusOneButton"),count:e.showCounts&&"none"!=e.showCounts,callback:"gig-googlePlusOne-"+e.containerID,size:e.oButton.size?e.oButton.size:e.showCounts&&"top"==e.showCounts?"tall":t.isMobileUI?"standard":"medium",containerID:e.containerID,annotation:e.oButton.annotation?e.oButton.annotation:"none"==e.showCounts?"none":"bubble",width:e.oButton.width?e.oButton.width:""};return window[n.callback]=function(e){if("on"==e.state){var n={eventName:"sendDone",providers:"google-plusOne",userMessage:"",targetURL:e.href};gigya.events.dispatchForWidget(n,t._p),t.reportShare("google-plusOne",e.href)}},n},render:function(){var t=this.button;window.___gcfg={lang:this.button.plugin._p.lang},gigya.utils.script.load("https://apis.google.com/js/plusone.js",null,function(){"undefined"!=typeof gapi&&gapi.plusone&&gapi.plusone.go(t.containerID)},!0)}},n.ButtonItem["googleplus-share"].prototype={getItem:function(){var t=this.button.plugin,e=this.button,n={buttonType:"share",buttonContainer:this.button.plugin.templates.get("googlePlusShareButton"),callback:"gig-googlePlusOne-"+e.containerID,containerID:e.containerID,annotation:e.oButton.annotation?e.oButton.annotation:"none"==e.showCounts?"none":"top"==e.showCounts?"vertical-bubble":"bubble",width:e.oButton.width?e.oButton.width:"",height:e.oButton.height?e.oButton.height:t.isMobileUI?"24":""};return window[n.callback]=function(e){if("confirm"==e.type){var n={eventName:"sendDone",providers:"google-plusOne",userMessage:"",targetURL:e.href};gigya.events.dispatchForWidget(n,t._p),t.reportShare("googleplus-share",e.id)}},n},render:function(){var t=this.button;window.___gcfg={lang:this.button.plugin._p.lang},gigya.utils.script.load("https://apis.google.com/js/plusone.js",null,function(){"undefined"!=typeof gapi&&gapi.plus&&gapi.plus.go(t.containerID)},!0)}},n.ButtonItem["googleplus-interactive"].prototype={getItem:n.ButtonItem.generic.prototype.getItem,render:function(){var t=this.button,e=t.plugin.$(t.containerID);e.removeAttribute("onClick"),window.___gcfg={lang:this.button.plugin._p.lang},gigya.utils.script.load("https://apis.google.com/js/client:plusone.js",null,function(){var e={calltoactionlabel:t.oButton.callToActionLabel,calltoactionurl:t.oButton.callToActionURL,contentdeeplinkid:t.oButton.contentDeepLinkID,clientid:t.oButton.clientID,contenturl:t.oButton.contentURL,calltoactiondeeplinkid:t.oButton.callToActionDeepLinkID,cookiepolicy:t.oButton.cookiePolicy,prefilltext:t.oButton.preFillText};"undefined"!=typeof gapi&&gapi.interactivepost&&gapi.interactivepost.render(t.containerID,e)},!0)}},n.ButtonItem["moshare-sms"].prototype={getItem:function(){var t,e=this.button,n=e.getUserAction();t="right"==e.showCounts?e.oButton.iconOnly||gigya.utils.validation.isExplicitTrue(e.plugin._p.iconsOnly)?"moshare-chicklet-hor":"moshare-button-hor":e.oButton.iconOnly?"moshare-button-mini":"moshare-button";var i=e.getThumbnailURL(),o={buttonType:"share",buttonContainer:e.plugin.templates.get("moshareSmsButton"),moshareClass:t,title:n.title?n.title:"",description:n.description?n.description:"",thumbnailURL:i?i:""};return o},render:function(){gigya.utils.script.load("http://d2c.bandcon.mogreet.com/moshare/embed/moshare.js")}},n.ButtonItem.getglue.prototype={getItem:function(){var t=this,e=this.button,n=e.getUserAction(),i={buttonType:"share",buttonContainer:e.plugin.templates.get("getglueButton"),title:n.title?n.title:"",message:n.description?n.description:"",type:"right"==e.showCounts?"horizontal":"vertical",callbackId:"gig_getglue+"+(new Date).getTime()};return window[i.callbackId]=function(){var n={eventName:"sendDone",providers:"getglue",targetURL:t.item.href};gigya.events.dispatchForWidget(n,e.plugin._p),e.plugin.reportShare("getglue",t.item.href)},i},render:function(){gigya.utils.script.load(document.location.protocol+"//widgets.getglue.com/checkin.js",null,function(){window.getglue&&window.getglue.loadWidgets()},!0)}},n.ButtonItem["twitter-tweet"].prototype={getItem:function(){var t,e,n=this.button;switch(this.button.id){case"twitter-mention":t="twitter-mention-button",e="https://twitter.com/intent/tweet?screen_name="+(null!=n.oButton.mention?n.oButton.mention:"&#160;");break;case"twitter-hashtag":t="twitter-hashtag-button",e="https://twitter.com/intent/tweet?button_hashtag="+(null!=n.oButton.hashtag?n.oButton.hashtag:"&#160;");break;case"twitter-tweet":default:t="twitter-share-button",e="https://twitter.com/share"}var i=n.getUserAction().title,o=(n.plugin.isMobileUI?90:70)+("right"==n.showCounts?27:0),a={buttonType:"share",buttonContainer:n.plugin.templates.get("twitterTweetButton"),twitterClass:t,twitterHref:e,count:"top"==n.showCounts?"vertical":"right"==n.showCounts?"horizontal":"none",containerID:n.containerID+"_tweet"+(new Date).getTime(),via:n.oButton.via?n.oButton.via:"",defaultText:n.oButton.defaultText?n.oButton.defaultText:i?i:"",countURL:n.oButton.countURL||n.plugin._p.countURL||"",lang:n.oButton.lang?n.oButton.lang:n.plugin._p.lang,related:n.oButton.related?n.oButton.related:"",size:n.plugin.isMobileUI?"large":"",width:n.oButton.width||o};return this.containerID=a.containerID,a},render:function(){var t=this.button.plugin,e=this,n=document.getElementById(this.containerID),i=function(){if(n){try{twttr.widgets.load(n)}catch(i){}twttr.events.bind("tweet",function(n){if(n.target.parentNode.id==e.containerID){var i={eventName:"sendDone",providers:e.button.id,userMessage:"",targetURL:e.item.href};gigya.events.dispatchForWidget(i,t._p),t.reportShare(e.button.id,e.item.href)}})}};gigya.utils.script.load(document.location.protocol+"//platform.twitter.com/widgets.js",null,i,!0)}},n.ButtonItem["twitter-hashtag"]=n.ButtonItem["twitter-tweet"],n.ButtonItem["twitter-mention"]=n.ButtonItem["twitter-tweet"],n.ButtonItem.comments.prototype={getItem:n.ButtonItem.generic.prototype.getItem,render:function(){var t=this,e={callback:function(e){0==e.errorCode&&"none"!=t.button.showCounts&&e.streamInfo&&e.streamInfo.commentCount&&e.streamInfo.commentCount>0&&t.button.updateCount(e.streamInfo.commentCount)},categoryID:this.button.oButton.categoryID,streamID:this.button.oButton.streamID,cacheTimeout:this.button.plugin._p.shareCountCacheTimeout};gigya.services.comments.getStreamInfo(this.button.plugin._c,e)}},n.ButtonItem.foursquare.prototype={getItem:n.ButtonItem.generic.prototype.getItem,render:function(){var t=this.button,e="http://platform.foursquare.com/js/widgets.js";"https"==gigya.thisScript.protocol&&(window.___fourSq={secure:!0},e="https://platform-s.foursquare.com/js/widgets.js"),gigya.utils.script.load(e,null,function(){var e=new fourSq.widget.SaveTo({vid:t.oButton.vid,variant:t.oButton.variant,hideTooltip:t.oButton.hideTooltip});e.bind("added",function(){var e={eventName:"sendDone",providers:t.id,userMessage:"",targetURL:""};gigya.events.dispatchForWidget(e,t.plugin._p),t.plugin.reportShare(t.id,"")}),e.attach(document.getElementById(t.containerID))},!0)}},n.ButtonItem["foursquare-save"].prototype={getItem:function(){var t={buttonType:"share",buttonContainer:'<div id="'+this.button.containerID+'"></div>',count:"none"};return t},render:function(){var t=this.button,e="http://platform.foursquare.com/js/widgets.js";"https"==gigya.thisScript.protocol&&(window.___fourSq={secure:!0},e="https://platform-s.foursquare.com/js/widgets.js"),gigya.utils.script.load(e,null,function(){var e=new fourSq.widget.SaveTo({vid:t.oButton.vid,variant:t.oButton.variant,hideTooltip:t.oButton.hideTooltip});e.bind("open",function(){gigya.events.dispatchForWidget({eventName:"shareButtonClicked",shareItem:t.oButton},t.plugin._p)}),e.bind("added",function(){var e={eventName:"sendDone",providers:t.id,userMessage:"",targetURL:""};gigya.events.dispatchForWidget(e,t.plugin._p),t.plugin.reportShare(t.id,"")}),e.replace(document.getElementById(t.containerID))},!0)}},n.ButtonItem["pinterest-pinit"].prototype={getItem:function(){var t=this.button,e=t.getUserAction(),n=t.oButton.shape?t.oButton.shape:"",i="round"==n?"//assets.pinterest.com/images/pidgets/pinit_fg_en_round_red_16.png":"//assets.pinterest.com/images/PinExt.png",o={buttonType:"share",buttonContainer:t.plugin.templates.get("pinterestPinitButton"),count:"top"==t.showCounts?"vertical":"right"==t.showCounts?"horizontal":"none",description:gigya.utils.URL.URLEncode(e.description),href:gigya.utils.URL.URLEncode(t.getShareURL()),containerID:t.containerID,lang:t.oButton.lang?t.oButton.lang:t.plugin._p.lang,related:t.oButton.related?t.oButton.related:"",shape:"round"==n?'data-pin-shape="round"':"",imgName:i},a=t.getThumbnailURL();return o.thumbnailURL=gigya.utils.URL.URLEncode(a?a:o.href),this.containerID=o.containerID,o},render:function(){gigya.utils.script.load(document.location.protocol+"//assets.pinterest.com/js/pinit.js")}},n.ButtonItem.kindle.prototype={getItem:n.ButtonItem.generic.prototype.getItem,render:function(){var t=this.button.oButton,e=this,n=document.getElementById(this.button.containerID);n&&(gigya.utils.DOM.addClassToElement(n,"kindleWidget"),gigya.utils.DOM.addEventListener(n,"click",function(){e.button.plugin.reportShare("kindle","")}),gigya.utils.script.load("https://d1xnn692s7u6t6.cloudfront.net/widget.js",null,function(){if(window.$SendToKindle&&window.$SendToKindle.Widget){var e=gigya.utils.object.removeUndefined({content:t.content,title:t.title,author:t.author,published:t.published,exclude:t.exclude,pagination:t.pagination,asin:t.asin});$SendToKindle.Widget.init(e)}},!0))}},n.ButtonItem["hatena-bookmark"].prototype={getItem:function(){var t=this.button,e="none"==t.showCounts?"standard-noballoon":"top"==t.showCounts?"vertical-balloon":"standard-balloon",n=gigya.utils.validation.isExplicitTrue(t.plugin._p.iconsOnly);null!=t.oButton.iconOnly&&(n=gigya.utils.validation.isExplicitTrue(t.oButton.iconOnly)),n&&(e="none"==t.showCounts?"simple":"top"==t.showCounts?"simple":"simple-balloon");var i=(t.pluginInstance,"ja");"en"==t.oButton.lang&&(i="en");var o=gigya._.apiAdapter.getTokenParam(t.plugin._c.APIKey,"UUID"),a={uu:o,s:t.plugin._p.source,p:t.id},s={protocol:document.location.protocol,id:t.containerID+(new Date).getTime(),buttonType:"share",className:this.className+" gig-hatenaBookmarkButton-"+e,buttonContainer:t.plugin.templates.get("hatenaBookmarkButton"),layout:e,containerID:t.containerID,ref:gigya.utils.keyValue.serialize(a,":"),lang:i,title:t.getUserAction().title};return this.id=s.id,s},render:function(){gigya.utils.script.load(document.location.protocol+"//b.hatena.ne.jp/js/bookmark_button.js")}},n.ButtonItem.lineit.prototype={constant:{LINE_BASE_URL:"//line.me/R/msg/text/",IMG_BASE_URL:"//media.line.me/img/button/",ALT:{ja:"LINEで送る",en:"LINE it!","zh-hans":"LINE it!","zh-hant":"LINE it!"},IMG_SIZE:{ja:{a:[82,20],b:[20,20],c:[30,30],d:[40,40],e:[36,60]},en:{a:[78,20],b:[20,20],c:[30,30],d:[40,40],e:[36,60]},"zh-hans":{a:[84,20],b:[20,20],c:[30,30],d:[40,40],e:[36,60]},"zh-hant":{a:[84,20],b:[20,20],c:[30,30],d:[40,40],e:[36,60]}}},getItem:function(){var t=this.button,e=t.getUserAction(),n=this.constant,i=t.plugin._p.lang;"zh-hk"==i||"zh-tw"==i?i="zh-hans":"ja"!=i&&"en"!=i&&(i="en");var o="a",a=n.IMG_SIZE[i][o],s=[n.IMG_BASE_URL,i,"/",a[0],"x",a[1],".png"].join(""),r={id:t.containerID+(new Date).getTime(),buttonType:"share",className:this.className+" gig-lineitShareButton",href:gigya.utils.URL.URLEncode(t.getShareURL()),title:e.title||"",buttonContainer:t.plugin.templates.get("lineitShareButton"),containerID:t.containerID,imgUrl:s,alt:n.ALT[i],w:a[0],h:a[1]};return this.id=r.id,r},render:function(){}},n.Button=function(t,e,i,o){if(this.oButton=t,this.index=e,this.type=i,this.pluginInstance=o,this.containerID=o._p.containerID+"-reaction"+e,this.noButtonBorders=gigya.utils.validation.isExplicitTrue(o._p.noButtonBorders),null!=this.oButton.noButtonBorders&&(this.noButtonBorders=gigya.utils.validation.isExplicitTrue(this.oButton.noButtonBorders)),gigya.utils.validation.isExplicitFalse(t.enableCount)&&(this.showCounts="none"),this.showCounts||(this.showCounts=o._p.showCounts),this.showCounts&&(this.showCounts=this.showCounts.toLowerCase()),"share"==i){var a=gigya.utils.validation.isExplicitTrue(o._p.iconsOnly);null!=this.oButton.iconOnly&&(a=gigya.utils.validation.isExplicitTrue(this.oButton.iconOnly)),a&&(this.noButtonBorders=!0);var s=this.oButton.provider.split(" ").join(""),r=gigya.services.socialize._getProviderByName(s,o.bookmarkSitesArray);this.labelText=r&&!a?r.displayName:"",this.id=this.oButton.provider.toLowerCase().split(" ").join(""),"share"==this.id&&gigya.utils.script.load(gigya._.getCdnResource("/js/gigya.services.socialize.plugins.simpleshare.min.js"),null,null,!0),this.showCounts||(this.showCounts="right"),n.providerSupportsCounter(this.id)||(this.showCounts="none")}"reaction"==i&&(this.showCounts||(this.showCounts="none"),this.labelText=t.text,this.id=t.ID,this.id||(this.id=this.labelText)),this.plugin=o,this.plugin.buttonInstances||(this.plugin.buttonInstances={}),this.plugin.buttonInstances[this.containerID]=this},n.Button.prototype={$:function(t){return document.getElementById(t)},getRefString:function(){return this.plugin.getInstanceRefString()+".buttonInstances['"+this.containerID+"']"},state:"Up",onClick:function(){if("share"==this.type&&this.plugin.onShare(this),"reaction"==this.type)if("Down"==this.state){if(gigya.utils.validation.isExplicitFalse(this.plugin._p.cancelReactions))return;if(gigya.utils.validation.isExplicitFalse(this.plugin._p.multipleReactions)){var t=this.plugin.buttonInstances;for(var e in t)e!=this.containerID&&t[e].enable()}this.plugin.onUndoReaction(this),this.unfixDown()}else this.plugin.onReaction(this),this.fixDown()},updateImageElement:function(t,e,n,i){t=t.toLowerCase();var o=t.split("-"),a=document.getElementById(this.containerID+"-"+o[0]+"_img");if(a){var s=i[e]?i[e]:this.plugin.buttonImages[e];if(s&&"img"==a.nodeName.toLowerCase())a.src=s;else if(n&&n.spriteData[t]){var r=n.getSpriteData(t);a.style.backgroundImage!='url("'+n.src+'")'&&(a.style.backgroundImage='url("'+n.src+'")'),a.style.backgroundPosition="-"+r.x+"px 0px"}}},getButtonImageHTML:function(t,e,n,i,o,a){t=t.toLowerCase();var s=t.split("-"),r=o[e]?o[e]:this.plugin.buttonImages[e];return r?this.plugin.getImageHTML(r,this.containerID+"-"+n+"_img",a):i&&i.spriteData[t]?i.getHTML(t,null,null,this.containerID+"-"+s[0]+"_img"):""},getShareURL:function(){var t=this.oButton.url;if(!t&&this.oButton.userAction&&(t=this.oButton.userAction.linkBack),!t&&this.plugin._p[this.id+"UserAction"]&&(t=this.plugin._p[this.id+"UserAction"].linkBack),!t&&this.plugin._p.userAction&&(t=this.plugin._p.userAction.linkBack),!t)for(var e=document.getElementsByTagName("meta"),n=0;n<e.length;n++)if("og:url"==e[n].getAttribute("property")&&e[n].getAttribute("content")){t=e[n].getAttribute("content");break}if(!t)for(var i=document.getElementsByTagName("link"),n=0;n<i.length;n++){var o=i[n];"canonical"==o.getAttribute("rel")&&(t=o.getAttribute("href"))}return t||(t=document.location.href),t},getUserAction:function(){var t;return this.oButton.userAction&&(t=this.oButton.userAction),!t&&this.plugin._p[this.id+"UserAction"]&&(t=this.plugin._p[this.id+"UserAction"]),!t&&this.plugin._p.userAction&&(t=this.plugin._p.userAction),t=new gigya.socialize.UserAction(t),t.linkBack=this.getShareURL(),t
},getThumbnailURL:function(){var t,e=this.getUserAction(),n=e.mediaItems;if(n)for(var i=0;i<n.length;i++){var o=n[i];if(null!=o){if("image"==o.type){t=o.src;break}if("video"==o.type||"flash"==o.type){t=o.previewImageURL;break}}}return t},getHTML:function(){var t=n.ButtonItem[this.id];t||(t=n.ButtonItem.generic);var e=new t(this),i=e.item;i.href||(i.href=gigya.utils.sanitize.sanitizeAttribute(this.getShareURL())),e.render&&window.setTimeout(function(){e.render()},300);var o=this.plugin._p.layout;o&&(o=o.toLowerCase()),i.className="gig-button-container gig-button-container-count-"+this.showCounts+" gig-button-container-"+this.id+" gig-button-container-"+this.id+"-count-"+this.showCounts+" gig-$buttonType-button-container gig-button-container-horizontal","vertical"==o&&(i.className="gig-button-container gig-button-container-"+this.id+" gig-button-container-count-"+this.showCounts+" gig-$buttonType-button-container gig-button-container-vertical gig-$buttonType-button-container-vertical"),i.cellValign||(i.cellValign="bottom"),i.id||(i.id=this.containerID),(this.plugin._p.buttonTemplate||this.plugin._p.buttonWithCountTemplate)&&("function"==typeof i.buttonContainer&&(i.buttonContainer=i.buttonContainer(i)),i.buttonContainer='<div id="$id" class="gig-button-up"  title="$tooltip" alt="$tooltip">'+i.buttonContainer+"</div>");var a;return a=this.plugin.templates.get("vertical"==o?"buttonRow":this.plugin._p.wrap?"buttonWithoutCell":"buttonCell"),gigya.utils.templates.fill(a,i)},fixDown:function(t){if(gigya.utils.validation.isExplicitFalse(this.plugin._p.multipleReactions)){var e=this.plugin.buttonInstances;for(var n in e)n!=this.containerID&&e[n].disable()}this.changeState("down"),this.disabled=!0,t||this.saveState()},unfixDown:function(){this.disabled=!1,this.changeState("up"),this.saveState()},disable:function(){this.changeState("disabled"),this.disabled=!0},enable:function(){this.disabled=!1,this.changeState("up")},saveState:function(){var t="Down"==this.state;this.plugin.setDownState(this.id,t)},loadState:function(){var t=this.plugin.getDownState(this.id);t&&this.fixDown(!0)},changeState:function(t){if(!this.disabled){var t=t.substring(0,1).toUpperCase()+t.substring(1),e=this.state;this.state=t;var n=this.containerID,i=this.$(n);i.className=i.className.replace("gig-button-"+e.toLowerCase(),"gig-button-"+t.toLowerCase());var o=(this.$(n+"-left_img"),this.$(n+"-icon")),a=this.$(n+"-text"),s=(this.$(n+"-right_img"),this.$(n+"-icon_img"),this.plugin.buttonImages);this.noButtonBorders&&(s={countBGImg:s.countBGImg});var r=this.plugin.spriteRenderer.button,u=this.plugin.spriteRenderer.icons;if(this.noButtonBorders||this.updateImageElement("left-"+t,"buttonLeftImg"+t,r,s),this.noButtonBorders||this.updateImageElement("right-"+t,"buttonRightImg"+t,r,s),this.updateImageElement("icon-"+t,"iconImg"+t,u,this.oButton),!this.noButtonBorders&&o&&s["buttonCenterBGImg"+t]&&(o.style.backgroundImage='url("'+s["buttonCenterBGImg"+t]+'")'),!this.noButtonBorders&&a&&s["buttonCenterBGImg"+t]&&(a.style.backgroundImage='url("'+s["buttonCenterBGImg"+t]+'")'),i){var l;"Disabled"==t?(i.style.cursor="default",l=this.oButton.disabledTooltip):(i.style.cursor="",l=this.oButton.tooltip),l||(l=""),i.title=l,i.alt=l}}},updateCount:function(t,e,n){if(n||(n=0),null!=t&&!(this.plugin._p.displayCountThreshold&&t<this.plugin._p.displayCountThreshold)){this.countValue=t;var i=document.getElementById(this.containerID+"-count"),o=document.getElementById(this.containerID+"-count-value");i&&(i.style.display="");var a="reaction"==this.type&&this.pluginInstance._p.countType&&"percentage"==this.pluginInstance._p.countType.toLowerCase();if(a){if(t=0==this.pluginInstance._totalCount?"0%":Math.round(100*this.countValue/this.pluginInstance._totalCount)+n+"%",!e){var s=this.plugin.buttonInstances;for(var r in s)r!=this.containerID&&s[r].updateCount(s[r].countValue,!0)}}else t>1e3&&(t=Math.round(t/1e3)+"K");o&&(o.innerHTML=""+t),a&&!e&&this.plugin.normalizePercents()}},hideCount:function(){var t=document.getElementById(this.containerID+"-count");t&&(t.style.display="none")}},n.reactionsPlugin.prototype={$:function(t){return document.getElementById(t)},TEXT:function(t,e,n){return gigya.pluginUtils.lang.getLocalizedText("gigya.services.socialize.plugins.reactions.js",t,this._p.lang,e,n)},getImageHTML:function(t,e,n){var i=this.templates.get("image");return n&&(i=this.templates.get("imageWithSize")),gigya.utils.templates.fill(i,{src:t,imgId:e,size:n})},reportShare:function(t,e){var n=this._p.sourceData?gigya.utils.object.clone(this._p.sourceData):{};n.provider=t,n.url=e,gigya.reports.report("share",this._c.APIKey,this._c.cid,this._p.source,n,{tags:this._p.tags})},getInstanceRefString:function(){return"gigya.services.socialize.plugins.reactions.instances['"+this._elid+"']"},loadDownStates:function(){var t={},e=gigya.utils.localStorage.getItem("reactionState-down_"+this._barID);if(e){for(var n=e.split(","),i=0;i<n.length;i++)t[n[i]]=!0;this._oDownStates=t}this._oDownStates=t},getDownState:function(t){return this._oDownStates[t]},setDownState:function(t,e){this._oDownStates[t]=e;var n=[];for(var i in this._oDownStates)this._oDownStates[i]&&n.push(i);gigya.utils.localStorage.setItem("reactionState-down_"+this._barID,n.join(","))},draw:function(){var t=this.$(this._elid),e=(t.parentNode,this._elid+"_gig_containerParent");if(t.parentNode&&(t.parentNode.id?e=t.parentNode.id:t.parentNode.id=e),this.loadDownStates(),"vertical"==this._p.layout&&(this._p.wrap=!1),(this._p.cssPrefix||1==n.instances_size)&&(gigya.global.addCSS(n.defaultCss,this._p.cssPrefix),this.isMobileUI?gigya.global.addCSS(n.mobileCss,this._p.cssPrefix):gigya.global.addCSS(n.nonMobileCss,this._p.cssPrefix)),this.templates=n.createDefaultTemplates(),this._p.buttonTemplate){var i=this._p.buttonTemplate;this.templates.set("buttonWithoutCount",i),"reaction"==this._i.buttonsType&&(this.templates.set("buttonWithCountTop",i),this.templates.set("buttonWithCountRight",i),"string"==typeof i&&-1!=i.indexOf("$count")&&(this.usingCountTemplate=!0))}if(this._p.buttonWithCountTemplate&&"share"==this._i.buttonsType){var o=this._p.buttonWithCountTemplate;this.templates.set("buttonWithCountTop",o),this.templates.set("buttonWithCountRight",o),"string"==typeof o&&-1!=o.indexOf("$count")&&(this.usingCountTemplate=!0)}this.buttonImages=this._p.buttonImages;var a={};if(!this.buttonImages)if("share"==this._i.buttonsType)if(this.isMobileUI){var s=gigya._.getCdnResource("/gs/i/shareBar/button/mobile/");this.buttonImages={buttonCenterBGImgUp:s+"buttonCenterImgUp.png"},a.button={path:"/shareBar/button/mobile/button[left,right]Img[up].png",w:5,h:35}}else{var s=gigya._.getCdnResource("/gs/i/shareBar/button/");this.buttonImages={buttonCenterBGImgUp:s+"buttonCenterImgUp.png",buttonCenterBGImgOver:s+"buttonCenterImgUp.png"},a.button={path:"/shareBar/button/button[left,right]Img[up,over].png",w:2,h:20}}else{a.button={path:"/shareBar/button/button[left,right]Img[up,over,down,disabled].png",w:2,h:20};var s=gigya._.getCdnResource("/gs/i/reactions/default/");this.buttonImages={buttonCenterBGImgUp:s+"buttonCenterImgUp.gif",buttonCenterBGImgOver:s+"buttonCenterImgBGOver.gif",buttonCenterBGImgDisabled:s+"buttonCenterBGImgDisabled.gif",buttonCenterBGImgDown:s+"buttonCenterImgBGDown.gif"},"right"==this._p.showCounts&&(this.buttonImages.countBGImg=gigya._.getCdnResource("/gs/i/reactions/default/rightCountImg.gif"))}a.count="top"==this._p.showCounts?this.isMobileUI?{path:"/shareBar/button/mobile/topCountImg.png",w:87,h:53}:{path:"/shareBar/button/topCountImg.png",w:55,h:37}:this.isMobileUI?{path:"/shareBar/button/mobile/rightCountImg.png",w:45,h:35}:{path:"/shareBar/button/rightCountImg.png",w:38,h:20},this.imageCache={loadedCount:0,imgs:[],imgCount:0};for(var r in this.buttonImages)this.imageCache.imgCount++;if(this.imageCache.imgCount>0){t.style.visibility="hidden";var u=this.imageCache,l=function(){u.loadedCount++,u.loadedCount==u.imgCount&&(t.style.visibility="visible")}}window.setTimeout(function(){t&&t.style&&(t.style.visibility="visible")},5e3);var g=this;for(btnImg in this.buttonImages){var c=new Image;if(c.onload=l,c.onerror=l,"countBGImg"==btnImg){if("none"==this._p.showCounts){l();continue}c.onload=function(){var e=this,n=t.getElementsByTagName("div");window.setTimeout(function(){for(var t=0;t<n.length;t++)-1!=n[t].className.indexOf("gig-counter")&&(n[t].style.width=e.width+"px",n[t].style.height=e.height+"px",n[t].style.zoom="1",n[t].style.position="relative")},100),l(),this.onload=null}}"buttonCenterBGImgUp"==btnImg&&(c.onload=function(){var e=this,n=t.getElementsByTagName("div");window.setTimeout(function(){for(var t=0;t<n.length;t++)-1!=n[t].className.indexOf("gig-button-td")&&(n[t].style.height=e.height+"px")},100),l(),this.onload=null}),c.src=this.buttonImages[btnImg],u.count++,u.imgs.push(c)}var d,h,p=[],b=this._i.buttonsType;switch(b){case"share":var m=this._p.shareButtons;if("string"==typeof m){d=[];for(var f=m.split(","),v=0;v<f.length;v++){var I={},y=f[v];I.provider=y,d.push(I)}}else d=m;var B=[],w=[],C="/sharebar/icons/",k=16;this.isMobileUI&&(C+="mobile/",k=25);for(var v=0;v<d.length;v++){var I=d[v];if(I){var y=I.provider;if(y){y=y.split(" ").join("");var _=gigya.services.socialize._getProviderByName(y,this.bookmarkSitesArray);if(null!=_){var D=_.name.split("-")[0];w.push(D),I.iconImgUp||(I.defaultIconImgUp=gigya._.getCdnResource("/gs/i"+C+D+".png"),I.iconSize=k),B.push(d[v])}}}}a.icons={path:C+"["+w.join(",")+"].png",w:k,h:k},d=B,h=this.updateShareCounts;break;case"reaction":default:h=this.updateReactionsCounts,d=this._p.reactions}this.spriteRenderer=gigya.global.getSpriteRenderers(a);var x=this._p.layout;x&&(x=x.toLowerCase());var T="vertical"==x,$=this._p.showCounts;$&&($=$.toLowerCase()),this._p.wrap||(p.push('<table cellspacing="0" cellpadding="0">'),T||p.push("<tr>"));var S="first";this._p.facebookLikeButton&&this._p.facebookLikeButton.position&&(S=this._p.facebookLikeButton.position),S=S.toLowerCase();var L="gig-facebookLikeButton";if(T||("first"==S&&(L="gig-facebookLikeButton-first"),"last"==S&&(L="gig-facebookLikeButton-last")),"share"==b&&this._p.facebookLikeButton){var U=gigya.utils.object.clone(this._p.facebookLikeButton);U.provider="facebook-like","first"==S?d.splice(0,0,U):"last"==S&&d.push(U)}for(var v=0;v<d.length;v++)if(d[v]){var E=new n.Button(d[v],v,b,this);p.push(E.getHTML())}this._p.wrap||T||p.push("</tr>"),p.push("</table>"),t.innerHTML='<div class="gig-bar-container gig-'+b+'-bar-container">'+p.join("")+"</div>";for(var R in this.buttonInstances)this.buttonInstances[R].loadState();h.apply(this,[$]),gigya.events.dispatchForWidget({eventName:"load",containerID:this._p.containerID},this._p),this.isMobileUI&&(gigya.utils.DOM.addEventListener(window,"resize",function(){return g.onResize()}),this.onResize())},onResize:function(){var t=this.$(this._elid);t&&(t.style.width=document.body.offsetWidth+"px")},updateShareCounts:function(t){if("none"!=t){var e=this,n="",i={enabledProviders:"",URL:this._p.userAction.linkBack,callback:function(t){e.updateCounts(t.shareCounts,"id")},cacheTimeout:this._p.shareCountCacheTimeout};for(var o in this.buttonInstances){var a=this.buttonInstances[o].oButton.provider.toLowerCase().split("-")[0];-1==n.indexOf(a)&&(n+=a+",")}for(var o in this.buttonInstances){var s=this.buttonInstances[o].oButton.provider.toLowerCase().split(" ").join("");"share"==s?i.enabledProviders=n:(i[s+"URL"]=this._p.countURL||this.buttonInstances[o].oButton.countURL||this.buttonInstances[o].getShareURL(),i.enabledProviders!=n&&(i.enabledProviders+=s+","))}gigya.services.socialize.getProviderShareCounts(this._c,i)}},updateReactionsCounts:function(t){var e="",n=this;for(var i in this.buttonInstances){var o=this.buttonInstances[i].id;e+=o+","}if(e){var a={barID:this._barID,buttonIDs:e,callback:function(t){if(t.errorCode>0&&gigya.events.dispatchErrorFromResponse(n._p,t),t.counts){for(var e={},i=0;i<t.counts.length;i++)e[t.counts[i].buttonId]=t.counts[i].count;n.updateCounts(e,"id")}}};a.reportLoad=this.usingCountTemplate||null!=t&&"none"!=t?"yes":"reportOnly",gigya.services.socialize.getReactionsCount(this._c,a)}},normalizePercents:function(){var t=0;for(var e in this.buttonInstances){var n=this.buttonInstances[e];n.delta=Math.round(n.countValue/this._totalCount*100)-n.countValue/this._totalCount*100,t+=Math.round(n.countValue/this._totalCount*100)}for(var i=t-100;0>i;){var o;for(var e in this.buttonInstances){var n=this.buttonInstances[e];(!o||n.delta<o.delta)&&(o=n)}o.updateCount(o.countValue,!0,1),o.delta=0,i++}for(;i>0;){var a;for(var e in this.buttonInstances){var n=this.buttonInstances[e];(!a||n.delta>a.delta)&&(a=n)}a.updateCount(a.countValue,!0,-1),a.delta=0,i--}},updateCounts:function(t,e){if(t){var n=0;for(var i in t)n+=t[i];this._totalCount=n;for(var o in this.buttonInstances){var a=this.buttonInstances[o],s=a[e];a.updateCount("share"==s?n:t[s])}}},onShare:function(t){var e=t.oButton;"share"==t.id||"comments"==t.id||isNaN(t.countValue)||t.sharedOnce||(this._totalCount+=1,t.updateCount(t.countValue+1),t.sharedOnce=!0);var n=gigya.utils.object.clone(this._p,!1,!0);n.onSendDone=this._p.onSendDone,n.userAction=t.getUserAction(),t.oButton.userMessage&&(n.userAction.userMessage=t.oButton.userMessage);var i=e.provider.toLowerCase().split(" ").join("");switch(i){case"foursquare":break;case"kindle":break;case"print":window.print();break;case"comments":break;case"email":this.isMobileUI?gigya._.sendEmailNative(n):(n.operationMode="multiSelect",n.hideSidebar=!0,n.initialView="email",n.containerID="",gigya.services.socialize.showShareUI(n));break;case"share":n.operationMode||(n.operationMode="simpleShare"),delete n.containerID,n.snapToElementID=t.containerID,gigya.services.socialize.showShareUI(n);break;default:n.provider=i,n.description=n.userAction.description,n.title=n.userAction.title,n.url=n.userAction.linkBack,n.providerKey=this._p[i+"Key"];var o=t.getThumbnailURL();o&&(n.thumbnailURL=o),gigya.services.socialize.postBookmark(n);var a={eventName:"sendDone",providers:i,userMessage:n.userAction.userMessage,targetURL:n.userAction.linkBack};gigya.events.dispatchForWidget(a,this._p)}gigya.utils.sessionCache.remove("getProviderShareCount_"+i.toLowerCase()+"_"+encodeURIComponent(n.url)),gigya.events.dispatchForWidget({eventName:"shareButtonClicked",shareItem:e},this._p)},onUndoReaction:function(t){var e=this._c.sourceData?gigya.utils.object.clone(this._c.sourceData,!1,!0):{};e.buttonID=t.id,e.buttonText=t.labelText,gigya.services.socialize.incrementReactionsCount(this._c,{barID:this._barID,buttonID:t.id,count:-1,sourceData:e}),isNaN(t.countValue)||(this._totalCount-=1,t.updateCount(t.countValue-1)),gigya.events.dispatchForWidget({eventName:"reactionUnclicked",reaction:t.oButton},this._p)},onReaction:function(t){if(!t.disabled){var e=this._c.sourceData?gigya.utils.object.clone(this._c.sourceData,!1,!0):{};e.buttonID=t.id,e.buttonText=t.labelText,gigya.services.socialize.incrementReactionsCount(this._c,{reactionBarId:this._barID,buttonID:t.id,count:1,sourceData:e}),isNaN(t.countValue)||(this._totalCount+=1,t.updateCount(t.countValue+1));var n=this.$(t.containerID),i=t.oButton;if(this._p.scope&&"internal"==this._p.scope.toLowerCase())gigya.services.socialize.publishUserAction(this._c,{sourceData:e});else if(n&&!gigya.utils.validation.isExplicitFalse(this._p.promptShare)){var o=t.index,a=this._p.containerID+"-share"+o,s=document.getElementById(a);if(s&&"none"!=s.style.display)return;s||(s=gigya.utils.DOM.createTopLevelDiv(a));var r,u,l=320,g=156,c=s.style,d=document.documentElement;if(window.innerHeight&&(r=window.innerHeight,u=window.innerWidth),"undefined"==typeof r){var d=document.documentElement;r=d.clientHeight,u=d.clientWidth}("undefined"==typeof r||0==r)&&document.body&&document.body.clientHeight&&(r=document.body.clientHeight,u=document.body.clientWidth);var h=gigya.utils.viewport.getScroll(),p=h.top,b=h.left,m=p+Math.floor(r/2),f=b+Math.floor(u/2),v=gigya.global._GetElementPos(n);c.top=v.top>m&&v.top>g?v.top-g+"px":v.top+n.offsetHeight+5+"px",c.left=v.left>f?v.left+n.offsetWidth-l+"px":v.left+"px",c.width=""+l+"px",c.height=""+g+"px";var I=document.getElementById("gigya_ifr_"+a);null!=I&&(I.style.top=parseInt(c.top)+5+"px",I.style.left=parseInt(c.left)+5+"px",I.style.width=l-10+"px",I.style.height=g-10+"px");var y=gigya.utils.object.clone(this._p,!0,!0);y.containerID=a,y.autoShareActionID=this._p.autoShareActionID?this._p.autoShareActionID:this._barID,y.onSendDone=this._p.onSendDone,y.onError=this._p.onError,y.sourceData=e,i.bodyText&&(y.bodyText=i.bodyText),i.headerText&&(y.headerText=i.headerText),i.userAction&&(y.userAction=new gigya.services.socialize.UserAction(gigya.utils.object.clone(i.userAction,!1,!0)));var B;if(t.oButton.userMessage&&(B=t.oButton.userMessage),t.oButton.feedMessage&&(B=t.oButton.feedMessage),B){var w=y.userAction.title;y.userAction.title=B,w&&""!=w&&(y.userAction.title+=" - "+w)}n.fncHide||(n.fncHide=function(t){var e;if(t)for(e=t.target,e||(e=t.srcElement);null!=e&&e.offsetParent&&-1==e.id.indexOf(a);)e=e.offsetParent;if(!e||-1==e.id.indexOf(a)){var i=document.getElementById(a),o=document.getElementById("gigya_ifr_"+a);i&&(i.style.display="none"),o&&(o.style.display="none"),document.attachEvent?document.detachEvent("onclick",n.fncHide):document.addEventListener&&document.removeEventListener("click",n.fncHide,!1)}}),y.onClose=n.fncHide,document.attachEvent?window.setTimeout(function(){document.attachEvent("onclick",n.fncHide)},100):document.addEventListener&&window.setTimeout(function(){document.addEventListener("click",n.fncHide,!1)},100),gigya.services.socialize.showMiniShareUI(y)}gigya.events.dispatchForWidget({eventName:"reactionClicked",reaction:i},this._p)}}},t[e]={instances:{},showReactionsBarUI:function(t,e,i){i.buttonsType="reaction",n.createInstance(t,e,i)},showShareBarUI:function(t,e,i){i.buttonsType="share",n.createInstance(t,e,i)}}}}();
});
