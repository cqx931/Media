var OF=OF||{};OF.Loader={};OF.Loader.loaded=0;OF.Storage={};OF.Settings={};OF.Settings.animate=1;
OF.Loader.init=function(){OF.Storage.baseCommentatorText=$("#nForum_commentDefault").text();$("#nForum_commentatorForm").removeClass("static");var s=$(".k_nForum_Commentator.notActive #nForum_commentatorContents textarea");s.val(OF.Storage.baseCommentatorText);s.focus(function(){$(this).val()==OF.Storage.baseCommentatorText&&$(this).addClass("k_modified").val("");OF.Loader.Completed||(OF.Loader.setPreloader(1),"undefined"!==typeof onet&&onet("vidEvent","action","forum_addcom",0,0),OF.Loader.getApp())}).blur(function(){if($(this).val()==
OF.Storage.baseCommentatorText||""==$(this).val())$(this).val(OF.Storage.baseCommentatorText),$(this).removeClass("k_modified")})};
OF.Loader.getApp=function(){var s,h="";"undefined"!=typeof OF.available_packages&&OF.available_packages["fplatform-nforum-app.js"]&&OF.available_packages["fplatform-nforum-commentator.css"]?(requirejs.config({baseUrl:"",waitSeconds:10}),s=OF.available_packages["fplatform-nforum-app.js"].url,h=OF.available_packages["fplatform-nforum-commentator.css"].url):(requirejs.config({baseUrl:"/forum/_s/packages",waitSeconds:10}),s="fplatform-nforum-app",h="/forum/_s/packages/fplatform-nforum-commentator.css");
OF.Loader.loadCss(h);requirejs([s],function(){window.setTimeout(function(){OF.Loader.setPreloader(0);var h=OF.commentatorJsonData;if("undefined"!=typeof ApplicationFacade){ApplicationFacade.OF_INIT_COMMENTATOR_STARTAPP="OF_INIT_COMMENTATOR_STARTAPP";var o=ApplicationFacade.getInstance();"object"==typeof o&&"object"==typeof h&&(o.registerCommand(ApplicationFacade.OF_INIT_COMMENTATOR_STARTAPP,OF.InitCommentatorCommand),ApplicationFacadeInstance.sendNotification(ApplicationFacade.OF_INIT_COMMENTATOR_STARTAPP,
h))}OF.Loader.Completed=1;$(".k_nForum_Commentator").removeClass("notActive");$("#nForum_commentatorFormTitleBox").removeClass("notActive");$("#nForum_commentSentInfoBox").removeClass("notActive")},100)})};OF.Loader.loadCss=function(s){var h=document.createElement("link");h.type="text/css";h.rel="stylesheet";h.href=s;document.getElementsByTagName("head")[0].appendChild(h)};
OF.Loader.setPreloader=function(s){var h=$('<div class="k_nForum_Loader" id="main-preloader-small"></div>');s&&!OF.Loader.loaded?($("#nForum_commentatorForm").append(h),OF.Loader.loaded=1,h.fadeIn()):$("#main-preloader-small").fadeOut(function(){$(this).remove()})};$(function(){OF.Loader.init()});var requirejs,require,define;
(function(s){function h(b){return"[object Function]"===J.call(b)}function F(b){return"[object Array]"===J.call(b)}function o(b,c){if(b){var e;for(e=0;e<b.length&&(!b[e]||!c(b[e],e,b));e+=1);}}function K(b,c){if(b){var e;for(e=b.length-1;-1<e&&(!b[e]||!c(b[e],e,b));e-=1);}}function z(b,c){for(var e in b)if(b.hasOwnProperty(e)&&c(b[e],e))break}function L(b,c,e,i){c&&z(c,function(c,h){if(e||!b.hasOwnProperty(h))i&&"string"!==typeof c?(b[h]||(b[h]={}),L(b[h],c,e,i)):b[h]=c});return b}function u(b,c){return function(){return c.apply(b,
arguments)}}function Z(b){if(!b)return b;var c=s;o(b.split("."),function(b){c=c[b]});return c}function aa(b,c,e){return function(){var i=ga.call(arguments,0),g;if(e&&h(g=i[i.length-1]))g.__requireJsBuild=!0;i.push(c);return b.apply(null,i)}}function ba(b,c,e){o([["toUrl"],["undef"],["defined","requireDefined"],["specified","requireSpecified"]],function(i){var g=i[1]||i[0];b[i[0]]=c?aa(c[g],e):function(){var b=w[M];return b[g].apply(b,arguments)}})}function G(b,c,e,i){c=Error(c+"\nhttp://requirejs.org/docs/errors.html#"+
b);c.requireType=b;c.requireModules=i;if(e)c.originalError=e;return c}function ha(){if(H&&"interactive"===H.readyState)return H;K(document.getElementsByTagName("script"),function(b){if("interactive"===b.readyState)return H=b});return H}var ia=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,ja=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,ca=/\.js$/,ka=/^\.\//,J=Object.prototype.toString,A=Array.prototype,ga=A.slice,la=A.splice,x=!!("undefined"!==typeof window&&navigator&&document),da=!x&&"undefined"!==
typeof importScripts,ma=x&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,M="_",S="undefined"!==typeof opera&&"[object Opera]"===opera.toString(),w={},q={},P=[],N=!1,k,y,C,t,D,H,I,ea,fa;if("undefined"===typeof define){if("undefined"!==typeof requirejs){if(h(requirejs))return;q=requirejs;requirejs=void 0}"undefined"!==typeof require&&!h(require)&&(q=require,require=void 0);k=requirejs=function(b,c,e,i){var g=M,h;!F(b)&&"string"!==typeof b&&(h=b,F(c)?(b=c,c=e,e=i):b=[]);if(h&&
h.context)g=h.context;(i=w[g])||(i=w[g]=k.s.newContext(g));h&&i.configure(h);return i.require(b,c,e)};k.config=function(b){return k(b)};require||(require=k);k.version="2.0.4";k.jsExtRegExp=/^\/|:|\?|\.js$/;k.isBrowser=x;A=k.s={contexts:w,newContext:function(b){function c(a,d,r){var m=d&&d.split("/"),f=m,b=l.map,c=b&&b["*"],e,g,h;if(a&&"."===a.charAt(0))if(d){f=l.pkgs[d]?m=[d]:m.slice(0,m.length-1);d=a=f.concat(a.split("/"));for(f=0;d[f];f+=1)if(e=d[f],"."===e)d.splice(f,1),f-=1;else if(".."===e)if(1===
f&&(".."===d[2]||".."===d[0]))break;else 0<f&&(d.splice(f-1,2),f-=2);f=l.pkgs[d=a[0]];a=a.join("/");f&&a===d+"/"+f.main&&(a=d)}else 0===a.indexOf("./")&&(a=a.substring(2));if(r&&(m||c)&&b){d=a.split("/");for(f=d.length;0<f;f-=1){g=d.slice(0,f).join("/");if(m)for(e=m.length;0<e;e-=1)if(r=b[m.slice(0,e).join("/")])if(r=r[g]){h=r;break}!h&&c&&c[g]&&(h=c[g]);if(h){d.splice(0,f,h);a=d.join("/");break}}}return a}function e(a){x&&o(document.getElementsByTagName("script"),function(d){if(d.getAttribute("data-requiremodule")===
a&&d.getAttribute("data-requirecontext")===j.contextName)return d.parentNode.removeChild(d),!0})}function i(a){var d=l.paths[a];if(d&&F(d)&&1<d.length)return e(a),d.shift(),j.undef(a),j.require([a]),!0}function g(a,d,r,b){var f=a?a.indexOf("!"):-1,v=null,e=d?d.name:null,g=a,h=!0,i="",l,k;a||(h=!1,a="_@r"+(K+=1));-1!==f&&(v=a.substring(0,f),a=a.substring(f+1,a.length));v&&(v=c(v,e,b),k=p[v]);a&&(v?i=k&&k.normalize?k.normalize(a,function(a){return c(a,e,b)}):c(a,e,b):(i=c(a,e,b),l=j.nameToUrl(i)));
a=v&&!k&&!r?"_unnormalized"+(M+=1):"";return{prefix:v,name:i,parentMap:d,unnormalized:!!a,url:l,originalName:g,isDefine:h,id:(v?v+"!"+i:i)+a}}function q(a){var d=a.id,r=n[d];r||(r=n[d]=new j.Module(a));return r}function t(a,d,r){var b=a.id,f=n[b];if(p.hasOwnProperty(b)&&(!f||f.defineEmitComplete))"defined"===d&&r(p[b]);else q(a).on(d,r)}function B(a,d){var b=a.requireModules,m=!1;if(d)d(a);else if(o(b,function(d){if(d=n[d])d.error=a,d.events.error&&(m=!0,d.emit("error",a))}),!m)k.onError(a)}function y(){P.length&&
(la.apply(E,[E.length-1,0].concat(P)),P=[])}function w(a,d,b){a=a&&a.map;d=aa(b||j.require,a,d);ba(d,j,a);d.isBrowser=x;return d}function A(a){delete n[a];o(O,function(d,b){if(d.map.id===a)return O.splice(b,1),d.defined||(j.waitCount-=1),!0})}function C(a,d){var b=a.map.id,m=a.depMaps,f;if(a.inited){if(d[b])return a;d[b]=!0;o(m,function(a){if(a=n[a.id])return!a.inited||!a.enabled?(f=null,delete d[b],!0):f=C(a,L({},d))});return f}}function D(a,d,b){var m=a.map.id,f=a.depMaps;if(a.inited&&a.map.isDefine){if(d[m])return p[m];
d[m]=a;o(f,function(f){var f=f.id,c=n[f];!Q[f]&&c&&(!c.inited||!c.enabled?b[m]=!0:(c=D(c,d,b),b[f]||a.defineDepById(f,c)))});a.check(!0);return p[m]}}function I(a){a.check()}function T(){var a=1E3*l.waitSeconds,d=a&&j.startTime+a<(new Date).getTime(),b=[],m=!1,f=!0,c,g,h;if(!U){U=!0;z(n,function(a){c=a.map;g=c.id;if(a.enabled&&!a.error)if(!a.inited&&d)i(g)?m=h=!0:(b.push(g),e(g));else if(!a.inited&&a.fetched&&c.isDefine&&(m=!0,!c.prefix))return f=!1});if(d&&b.length)return a=G("timeout","Load timeout for modules: "+
b,null,b),a.contextName=j.contextName,B(a);f&&(o(O,function(a){if(!a.defined){var a=C(a,{}),d={};a&&(D(a,d,{}),z(d,I))}}),z(n,I));if((!d||h)&&m)if((x||da)&&!V)V=setTimeout(function(){V=0;T()},50);U=!1}}function W(a){q(g(a[0],null,!0)).init(a[1],a[2])}function J(a){var a=a.currentTarget||a.srcElement,d=j.onScriptLoad;a.detachEvent&&!S?a.detachEvent("onreadystatechange",d):a.removeEventListener("load",d,!1);d=j.onScriptError;a.detachEvent&&!S||a.removeEventListener("error",d,!1);return{node:a,id:a&&
a.getAttribute("data-requiremodule")}}var l={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},shim:{}},n={},X={},E=[],p={},R={},K=1,M=1,O=[],U,Y,j,Q,V;Q={require:function(a){return w(a)},exports:function(a){a.usingExports=!0;if(a.map.isDefine)return a.exports=p[a.map.id]={}},module:function(a){return a.module={id:a.map.id,uri:a.map.url,config:function(){return l.config&&l.config[a.map.id]||{}},exports:p[a.map.id]}}};Y=function(a){this.events=X[a.id]||{};this.map=a;this.shim=l.shim[a.id];this.depExports=
[];this.depMaps=[];this.depMatched=[];this.pluginMaps={};this.depCount=0};Y.prototype={init:function(a,d,b,m){m=m||{};if(!this.inited){this.factory=d;if(b)this.on("error",b);else this.events.error&&(b=u(this,function(a){this.emit("error",a)}));this.depMaps=a&&a.slice(0);this.depMaps.rjsSkipMap=a.rjsSkipMap;this.errback=b;this.inited=!0;this.ignore=m.ignore;m.enabled||this.enabled?this.enable():this.check()}},defineDepById:function(a,d){var b;o(this.depMaps,function(d,f){if(d.id===a)return b=f,!0});
return this.defineDep(b,d)},defineDep:function(a,d){this.depMatched[a]||(this.depMatched[a]=!0,this.depCount-=1,this.depExports[a]=d)},fetch:function(){if(!this.fetched){this.fetched=!0;j.startTime=(new Date).getTime();var a=this.map;if(this.shim)w(this,!0)(this.shim.deps||[],u(this,function(){return a.prefix?this.callPlugin():this.load()}));else return a.prefix?this.callPlugin():this.load()}},load:function(){var a=this.map.url;R[a]||(R[a]=!0,j.load(this.map.id,a))},check:function(a){if(this.enabled&&
!this.enabling){var d=this.map.id,b=this.depExports,c=this.exports,f=this.factory,e;if(this.inited)if(this.error)this.emit("error",this.error);else{if(!this.defining){this.defining=!0;if(1>this.depCount&&!this.defined){if(h(f)){if(this.events.error)try{c=j.execCb(d,f,b,c)}catch(g){e=g}else c=j.execCb(d,f,b,c);if(this.map.isDefine)if((b=this.module)&&void 0!==b.exports&&b.exports!==this.exports)c=b.exports;else if(void 0===c&&this.usingExports)c=this.exports;if(e)return e.requireMap=this.map,e.requireModules=
[this.map.id],e.requireType="define",B(this.error=e)}else c=f;this.exports=c;if(this.map.isDefine&&!this.ignore&&(p[d]=c,k.onResourceLoad))k.onResourceLoad(j,this.map,this.depMaps);delete n[d];this.defined=!0;j.waitCount-=1;0===j.waitCount&&(O=[])}this.defining=!1;if(!a&&this.defined&&!this.defineEmitted)this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0}}else this.fetch()}},callPlugin:function(){var a=this.map,d=a.id,b=g(a.prefix,null,!1,!0);t(b,"defined",u(this,function(b){var f=
this.map.name,e=this.map.parentMap?this.map.parentMap.name:null;if(this.map.unnormalized){if(b.normalize&&(f=b.normalize(f,function(a){return c(a,e,!0)})||""),b=g(a.prefix+"!"+f,this.map.parentMap,!1,!0),t(b,"defined",u(this,function(a){this.init([],function(){return a},null,{enabled:!0,ignore:!0})})),b=n[b.id]){if(this.events.error)b.on("error",u(this,function(a){this.emit("error",a)}));b.enable()}}else f=u(this,function(a){this.init([],function(){return a},null,{enabled:!0})}),f.error=u(this,function(a){this.inited=
!0;this.error=a;a.requireModules=[d];z(n,function(a){0===a.map.id.indexOf(d+"_unnormalized")&&A(a.map.id)});B(a)}),f.fromText=function(a,d){var b=N;b&&(N=!1);q(g(a));k.exec(d);b&&(N=!0);j.completeLoad(a)},b.load(a.name,w(a.parentMap,!0,function(a,d){a.rjsSkipMap=!0;return j.require(a,d)}),f,l)}));j.enable(b,this);this.pluginMaps[b.id]=b},enable:function(){this.enabled=!0;if(!this.waitPushed)O.push(this),j.waitCount+=1,this.waitPushed=!0;this.enabling=!0;o(this.depMaps,u(this,function(a,d){var b,c;
if("string"===typeof a){a=g(a,this.map.isDefine?this.map:this.map.parentMap,!1,!this.depMaps.rjsSkipMap);this.depMaps[d]=a;if(b=Q[a.id]){this.depExports[d]=b(this);return}this.depCount+=1;t(a,"defined",u(this,function(a){this.defineDep(d,a);this.check()}));this.errback&&t(a,"error",this.errback)}b=a.id;c=n[b];!Q[b]&&c&&!c.enabled&&j.enable(a,this)}));z(this.pluginMaps,u(this,function(a){var b=n[a.id];b&&!b.enabled&&j.enable(a,this)}));this.enabling=!1;this.check()},on:function(a,b){var c=this.events[a];
c||(c=this.events[a]=[]);c.push(b)},emit:function(a,b){o(this.events[a],function(a){a(b)});"error"===a&&delete this.events[a]}};return j={config:l,contextName:b,registry:n,defined:p,urlFetched:R,waitCount:0,defQueue:E,Module:Y,makeModuleMap:g,configure:function(a){a.baseUrl&&"/"!==a.baseUrl.charAt(a.baseUrl.length-1)&&(a.baseUrl+="/");var b=l.pkgs,c=l.shim,e=l.paths,f=l.map;L(l,a,!0);l.paths=L(e,a.paths,!0);if(a.map)l.map=L(f||{},a.map,!0,!0);if(a.shim)z(a.shim,function(a,b){F(a)&&(a={deps:a});if(a.exports&&
!a.exports.__buildReady)a.exports=j.makeShimExports(a.exports);c[b]=a}),l.shim=c;if(a.packages)o(a.packages,function(a){a="string"===typeof a?{name:a}:a;b[a.name]={name:a.name,location:a.location||a.name,main:(a.main||"main").replace(ka,"").replace(ca,"")}}),l.pkgs=b;z(n,function(a,b){a.map=g(b)});if(a.deps||a.callback)j.require(a.deps||[],a.callback)},makeShimExports:function(a){var b;return"string"===typeof a?(b=function(){return Z(a)},b.exports=a,b):function(){return a.apply(s,arguments)}},requireDefined:function(a,
b){var c=g(a,b,!1,!0).id;return p.hasOwnProperty(c)},requireSpecified:function(a,b){a=g(a,b,!1,!0).id;return p.hasOwnProperty(a)||n.hasOwnProperty(a)},require:function(a,d,c,e){var f;if("string"===typeof a){if(h(d))return B(G("requireargs","Invalid require call"),c);if(k.get)return k.get(j,a,d);a=g(a,d,!1,!0);a=a.id;return!p.hasOwnProperty(a)?B(G("notloaded",'Module name "'+a+'" has not been loaded yet for context: '+b)):p[a]}c&&!h(c)&&(e=c,c=void 0);d&&!h(d)&&(e=d,d=void 0);for(y();E.length;){if(f=
E.shift(),null===f[0])return B(G("mismatch","Mismatched anonymous define() module: "+f[f.length-1]));W(f)}q(g(null,e)).init(a,d,c,{enabled:!0});T();return j.require},undef:function(a){var b=g(a,null,!0),c=n[a];delete p[a];delete R[b.url];delete X[a];if(c){if(c.events.defined)X[a]=c.events;A(a)}},enable:function(a){n[a.id]&&q(a).enable()},completeLoad:function(a){var b=l.shim[a]||{},c=b.exports&&b.exports.exports,e,f;for(y();E.length;){f=E.shift();if(null===f[0]){f[0]=a;if(e)break;e=!0}else f[0]===
a&&(e=!0);W(f)}f=n[a];if(!e&&!p[a]&&f&&!f.inited){if(l.enforceDefine&&(!c||!Z(c)))return i(a)?void 0:B(G("nodefine","No define call for "+a,null,[a]));W([a,b.deps||[],b.exports])}T()},toUrl:function(a,b){var e=a.lastIndexOf("."),g=null;-1!==e&&(g=a.substring(e,a.length),a=a.substring(0,e));return j.nameToUrl(c(a,b&&b.id,!0),g)},nameToUrl:function(a,b){var c,e,f,g,h,i;if(k.jsExtRegExp.test(a))g=a+(b||"");else{c=l.paths;e=l.pkgs;g=a.split("/");for(h=g.length;0<h;h-=1)if(i=g.slice(0,h).join("/"),f=e[i],
i=c[i]){F(i)&&(i=i[0]);g.splice(0,h,i);break}else if(f){c=a===f.name?f.location+"/"+f.main:f.location;g.splice(0,h,c);break}g=g.join("/")+(b||".js");g=("/"===g.charAt(0)||g.match(/^[\w\+\.\-]+:/)?"":l.baseUrl)+g}return l.urlArgs?g+((-1===g.indexOf("?")?"?":"&")+l.urlArgs):g},load:function(a,b){k.load(j,a,b)},execCb:function(a,b,c,e){return b.apply(e,c)},onScriptLoad:function(a){if("load"===a.type||ma.test((a.currentTarget||a.srcElement).readyState))H=null,a=J(a),j.completeLoad(a.id)},onScriptError:function(a){var b=
J(a);if(!i(b.id))return B(G("scripterror","Script error",a,[b.id]))}}}};k({});ba(k);if(x&&(y=A.head=document.getElementsByTagName("head")[0],C=document.getElementsByTagName("base")[0]))y=A.head=C.parentNode;k.onError=function(b){throw b;};k.load=function(b,c,e){var h=b&&b.config||{},g;if(x)return g=h.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script"),g.type=h.scriptType||"text/javascript",g.charset="utf-8",g.async=!0,g.setAttribute("data-requirecontext",
b.contextName),g.setAttribute("data-requiremodule",c),g.attachEvent&&!(g.attachEvent.toString&&0>g.attachEvent.toString().indexOf("[native code"))&&!S?(N=!0,g.attachEvent("onreadystatechange",b.onScriptLoad)):(g.addEventListener("load",b.onScriptLoad,!1),g.addEventListener("error",b.onScriptError,!1)),g.src=e,I=g,C?y.insertBefore(g,C):y.appendChild(g),I=null,g;da&&(importScripts(e),b.completeLoad(c))};x&&K(document.getElementsByTagName("script"),function(b){if(!y)y=b.parentNode;if(t=b.getAttribute("data-main")){if(!q.baseUrl)D=
t.split("/"),ea=D.pop(),fa=D.length?D.join("/")+"/":"./",q.baseUrl=fa,t=ea;t=t.replace(ca,"");q.deps=q.deps?q.deps.concat(t):[t];return!0}});define=function(b,c,e){var i,g;"string"!==typeof b&&(e=c,c=b,b=null);F(c)||(e=c,c=[]);!c.length&&h(e)&&e.length&&(e.toString().replace(ia,"").replace(ja,function(b,e){c.push(e)}),c=(1===e.length?["require"]:["require","exports","module"]).concat(c));if(N&&(i=I||ha()))b||(b=i.getAttribute("data-requiremodule")),g=w[i.getAttribute("data-requirecontext")];(g?g.defQueue:
P).push([b,c,e])};define.amd={jQuery:!0};k.exec=function(b){return eval(b)};k(q)}})(this);
