/* 2016-05-27 12:23:17 */"use strict";!function(){var a=function(){return this.opened=!1,this.name="Mobile Widget",this.seen=!1,this.widgetID=0,this.delay=0,this.placeholder=limk.jQuery("#limk_responsive_widget_placeholder"),this.el={},this.articleAmount=0,this.articleStack="responsive",this.articles=null,this.creativeIds=[],this.seenPeriod=0,this.dimensions={height:20,width:150},this.detailsExists=function(){return!0},this.bindWidgetID=function(){this.widgetID=limk.key.applicationKey.responsive},this.bindArticleAmount=function(){this.articleAmount=limk.settings.widgets.mobile.articleAmount},this.takeArticles=function(){this.articles=limk.API.collection.take(this.articleStack,this.articleAmount)},this.prepareEl=function(){this.el.container=limk.jQuery(".limk-mobile-widget")},this.prepareHTML=function(){this.log("Preparing."),this.generatedHtml=limk.jQuery("<div/>",{"class":"limk-widget limk-mobile-widget limk-touch-target"}).attr("data-limk-widget-id",this.widgetID).append(limk.jQuery("<div/>",{"class":"small-screen"}).append(limk.jQuery("<div/>",{"class":"info-container"}).append(limk.jQuery("<span/>",{text:"Related Links"}))).append(limk.jQuery("<div/>",{"class":"slide-container"}).append(limk.jQuery("<ul/>",{"class":"limk-items"})).append(limk.jQuery("<div/>",{"class":"blur"})))).append(limk.jQuery("<div/>",{"class":"full-screen"}).append(limk.jQuery("<div/>",{"class":"indicator left"}).html("&laquo")).append(limk.jQuery("<div/>",{"class":"content"}).css("height","400px").css("width","400px")))},this.bindArticles=function(){this.placeholder.append(this.generatedHtml),limk.jQuery.each(this.articles,function(a,b){limk.jQuery(".limk-mobile-widget .limk-items").append(limk.jQuery("<li/>",{"class":b.hasImage()?"":"no-image"}).append(limk.jQuery("<a/>",{"class":"limk-article",href:b.url,rel:b.isSponsored()?"nofollow":"follow"}).attr("data-id",b.id).attr("data-token",b.token).attr("data-fp",b.fingerprint).attr("data-type",b.isSponsored()?"sponsored":"internal").append(b.hasImage()?limk.jQuery("<div/>",{"class":"image-container"}).append(limk.jQuery("<img/>",{"class":"limk-article-image scale",src:null}).attr("data-scale","best-fill").attr("data-align","center")).append(function(){return b.hasVideo()===!0?limk.jQuery("<img/>",{"class":"video-overlay",src:limk.environment.cdnUrl()+"assets/shared/img/play-button-sm.png"}):void 0}):"").append(limk.jQuery("<span/>",{"class":"limk-article-title",text:limk.helpers.threeDots(b.title,b.hasImage()?50:150)})).append(limk.jQuery("<span/>",{"class":"limk-article-brand",text:b.isSponsored()?b.brand:""}))))}),this.resizeRecommendations()},this.resizeRecommendations=function(){var a=this;limk.jQuery(".limk-mobile-widget .limk-items .limk-article").each(function(b,c){var d=limk.jQuery(c).find(".image-container");if(0!==d.length){var e=d.height(),f=d.width();limk.jQuery(c).find("img.limk-article-image").attr("src",a.articles[b].getImage(e,f))}})},this.enablePlugins=function(){},this.attempt=function(){this.open()},this.open=function(){return this.isPlaceholderBigEnoughToOpen()===!1?(this.log("It is not big enough to be considered as open. Stopping!"),!1):(this.opened=!0,void this.onOpen())},this.onOpen=function(){this.listenForSeen()},this.onScroll=function(){this.listenForSeen()},this.close=function(){},this.maximize=function(){},this.minimize=function(){},this.attachBindings=function(){var a=limk.jQuery(".limk-touch-target")[0],b=new Hammer(a),c=!1,d=function(){this.initialize.apply(this,arguments)};d.prototype={initialize:function(a){this.el=a,this.ul=a.find("ul"),this.li=this.ul.find("li"),this.liWidth=this.li[0].clientWidth,this.currentIndex=0,this.ul.css("width",this.liWidth*this.li.length+"px")},goTo:function(a){0>a||a>this.li.length-1||(this.ul.css("left","-"+this.liWidth*a+"px"),this.currentIndex=a)},prev:function(){this.goTo(this.currentIndex-1)},next:function(){this.goTo(this.currentIndex+1)}};var e=new d(limk.jQuery(".slide-container"));b.get("pan").set({direction:Hammer.DIRECTION_ALL}),b.on("panstart",function(){c=!0}),b.on("panend",function(){c=!1}),b.on("panup",function(){limk.jQuery(".limk-mobile-widget").animate({bottom:"0",opacity:"1"},400)}),b.on("pandown",function(){limk.jQuery(".limk-mobile-widget").animate({bottom:"-80px",opacity:"0.4"},400)}),b.on("panleft",function(){c===!1&&e.next()}),b.on("panright",function(){c===!1&&e.prev()})},this.adjustSeenPeriod=function(){this.seenPeriod=2e3},this},b=function(){return this.opened=!1,this.name="Responsive Widget",this.seen=!1,this.widgetID=0,this.delay=200,this.placeholder=limk.jQuery("#limk_responsive_widget_placeholder"),this.el={},this.articleAmount=0,this.articleStack="responsive",this.articles=null,this.creativeIds=[],this.seenPeriod=0,this.dimensions={height:100,width:100},this.detailsExists=function(){return!0},this.bindWidgetID=function(){this.widgetID=limk.key.applicationKey.responsive},this.bindArticleAmount=function(){this.articleAmount=limk.settings.widgets.responsive.articleAmount},this.takeArticles=function(){this.articles=limk.API.collection.take(this.articleStack,this.articleAmount)},this.prepareEl=function(){this.el.container=limk.jQuery(".limk-responsive-widget"),this.el.header=limk.jQuery(".limk-responsive-widget .limk-header"),this.el.content=limk.jQuery(".limk-responsive-widget .limk-content"),this.el.articleTitle=limk.jQuery(".limk-responsive-widget .limk-content span.limk-article-title")},this.prepareHTML=function(){this.log("Preparing."),this.generatedHtml=limk.jQuery("<div/>",{"class":"limk-widget limk-responsive-widget"}).attr("data-limk-widget-id",this.widgetID).append(limk.jQuery("<div/>",{"class":"limk-header"}).append(limk.jQuery("<span/>",{text:this.json.text})).append(limk.jQuery("<a/>",{"class":"btn-widget-minimize",href:"#"}).append(limk.jQuery("<img/>",{src:limk.environment.cdnUrl()+"assets/shared/img/minimize.png"}))).append(limk.jQuery("<a/>",{"class":"btn-widget-maximize",href:"#",css:{display:"none"}}).append(limk.jQuery("<img/>",{src:limk.environment.cdnUrl()+"assets/shared/img/maximize.png"}))).append(limk.jQuery("<a/>",{"class":"btn-widget-close",href:"#",text:"Ã—"}))).append(limk.jQuery("<div/>",{"class":"limk-content"}).append(limk.jQuery("<ul/>",{"class":"limk-items"})).append(this.getLogoModal()))},this.bindArticles=function(){this.placeholder.append(this.generatedHtml),limk.jQuery.each(this.articles,function(a,b){limk.jQuery(".limk-responsive-widget .limk-items").append(limk.jQuery("<li/>",{"class":b.hasImage()?"":"no-image"}).append(limk.jQuery("<a/>",{"class":"limk-article",href:b.url,rel:b.isSponsored()?"nofollow":"follow"}).attr("data-id",b.id).attr("data-token",b.token).attr("data-fp",b.fingerprint).attr("data-type",b.isSponsored()?"sponsored":"internal").append(b.hasImage()?limk.jQuery("<div/>",{"class":"image-container"}).append(limk.jQuery("<img/>",{"class":"limk-article-image scale",src:null}).attr("data-scale","best-fill").attr("data-align","center")).append(function(){return b.hasVideo()===!0?limk.jQuery("<img/>",{"class":"video-overlay",src:limk.environment.cdnUrl()+"assets/shared/img/play-button-sm.png"}):void 0}):"").append(limk.jQuery("<span/>",{"class":"limk-article-title",text:limk.helpers.threeDots(b.title,b.hasImage()?50:150)})).append(limk.jQuery("<span/>",{"class":"limk-article-brand",text:b.isSponsored()?b.brand:""}))))}),this.resizeRecommendations()},this.resizeRecommendations=function(){var a=this;limk.jQuery(".limk-responsive-widget .limk-items .limk-article").each(function(b,c){var d=limk.jQuery(c).find(".image-container");if(0!==d.length){var e=d.height(),f=d.width();limk.jQuery(c).find("img.limk-article-image").attr("src",a.articles[b].getImage(e,f))}})},this.enablePlugins=function(){this.log("Enabling plugins..."),1===this.json.pluginShareText&&!!limk.jQuery.prototype.contentshare==!0&&(limk.jQuery("body span, body p, body h1, body h2, body h3, body h4, body h5, body h6").contentshare(),limk.jQuery.fn.contentshare.enable(),limk.jQuery.fn.contentshare.defaults.shareable.on("mouseup",function(){limk.jQuery.fn.contentshare.showTooltip()})),1===this.json.pluginShareImage&&!!limk.jQuery.prototype.sti==!0&&(limk.jQuery("body img:not(.limk-widget img)").sti({minWidth:124,minHeight:124,primary_menu:["facebook","twitter"]}),limk.jQuery(".sti .sti-share-box a").css("background","transparent url("+limk.environment.cdnUrl()+"assets/shared/plugins/shareImage/img/sti-button.png) no-repeat"))},this.attempt=function(){this.el.content.css("height",this.json.height),this.el.content.css("width",this.json.width),this.el.container.css("height","auto"),limk.device.isMobileOrTablet()===!0&&this.el.container.css("bottom","0"),"left"===this.json.alignment?this.el.container.css("left","8px").css("right","auto"):this.el.container.css("left","auto").css("right","8px"),this.el.container.find(".limk-header span").text(this.json.text),this.el.articleTitle.css("color",this.json.articleColor),this.enableShadows(),this.enableAnimation(),this.el.container.show(),this.open()},this.open=function(){return this.isPlaceholderBigEnoughToOpen()===!1?(this.log("It is not big enough to be considered as open!"),!1):(this.opened=!0,void this.onOpen())},this.onOpen=function(){this.listenForSeen()},this.onScroll=function(){this.listenForSeen()},this.close=function(){this.el.container.animate({height:"0",border:"0"},"fast")},this.maximize=function(){this.el.content.show(),limk.jQuery(".btn-widget-maximize").hide(),limk.jQuery(".btn-widget-minimize").show()},this.minimize=function(){this.el.content.hide(),limk.jQuery(".btn-widget-minimize").hide(),limk.jQuery(".btn-widget-maximize").show()},this.attachBindings=function(){var a=this;limk.jQuery("body").on("click",".btn-widget-close",limk.jQuery.proxy(function(b){b.preventDefault(),a.close()},this)),limk.jQuery("body").on("click",".btn-widget-minimize",limk.jQuery.proxy(function(b){b.preventDefault(),a.minimize()},this)),limk.jQuery("body").on("click",".btn-widget-maximize",limk.jQuery.proxy(function(b){b.preventDefault(),a.maximize()},this))},this.enableShadows=function(){limk.jQuery(".limk-responsive-widget").css({"box-shadow":"0 0 "+this.json.shadow+this.json.shadowColor,"-moz-box-shadow":"0 0 "+this.json.shadow+this.json.shadowColor,"-webkit-box-shadow":"0 0 "+this.json.shadow+this.json.shadowColor})},this.enableAnimation=function(){1===this.json.animation&&limk.jQuery(".limk-responsive-widget .limk-items img").addClass("animated")},this.adjustSeenPeriod=function(){this.seenPeriod=2e3},this},c=function(){return this.opened=!1,this.name="Vertical Widget",this.seen=!1,this.widgetID=0,this.delay=0,this.placeholder=limk.jQuery("#limk_vertical_widget_placeholder"),this.el={},this.articleAmount=0,this.articleStack="vertical",this.articles=null,this.creativeIds=[],this.seenPeriod=0,this.dimensions={height:200,width:70},this.detailsExists=function(){return!0},this.bindWidgetID=function(){this.widgetID=limk.key.applicationKey.vertical},this.bindArticleAmount=function(){this.articleAmount=limk.settings.widgets.vertical.articleAmount},this.takeArticles=function(){this.articles=limk.API.collection.take(this.articleStack,this.articleAmount)},this.prepareEl=function(){this.el.container=limk.jQuery(".limk-vertical-widget"),this.el.content=limk.jQuery(".limk-vertical-widget .limk-content")},this.prepareHTML=function(){this.log("Preparing."),this.generatedHtml=limk.jQuery("<div/>",{"class":"limk-widget limk-vertical-widget"}).attr("data-limk-widget-id",this.widgetID).append(function(){return limk.settings.widgets.vertical.headline.length>0?limk.jQuery("<div/>",{"class":"limk-header"}).append(limk.jQuery("<span/>",{text:limk.settings.widgets.vertical.headline})):limk.jQuery("<div/>",{"class":"limk-header no-headline"})}).append(limk.jQuery("<div/>",{"class":"limk-content"}).append(limk.jQuery("<ul/>",{"class":"limk-items"})).append(this.getLogoModal()))},this.bindArticles=function(){this.placeholder.append(this.generatedHtml),limk.jQuery.each(this.articles,function(a,b){limk.jQuery(".limk-vertical-widget .limk-items").append(limk.jQuery("<li/>").append(limk.jQuery("<a/>",{"class":"limk-article",href:b.url,rel:b.isSponsored()?"nofollow":"follow"}).attr("data-id",b.id).attr("data-token",b.token).attr("data-fp",b.fingerprint).attr("data-type",b.isSponsored()?"sponsored":"internal").append(b.hasImage()?limk.jQuery("<div/>",{"class":"image-container"}).append(limk.jQuery("<img/>",{"class":"limk-article-image scale",src:null}).attr("data-scale","best-fill").attr("data-align","center")).append(function(){return b.hasVideo()===!0?limk.jQuery("<img/>",{"class":"video-overlay",src:limk.environment.cdnUrl()+"assets/shared/img/play-button-sm.png"}):void 0}):"").append(limk.jQuery("<span/>",{"class":"limk-article-title",text:b.title})).append(limk.jQuery("<span/>",{"class":"limk-article-brand",text:b.isSponsored()?b.brand:""}))))}),this.resizeRecommendations()},this.resizeRecommendations=function(){var a=this;limk.jQuery(".limk-vertical-widget .limk-items .limk-article").each(function(b,c){var d=limk.jQuery(c).find(".image-container");if(0!==d.length){var e=d.height(),f=d.width();limk.jQuery(c).find("img.limk-article-image").attr("src",a.articles[b].getImage(e,f))}})},this.enablePlugins=function(){},this.attempt=function(){this.open()},this.open=function(){return this.isPlaceholderBigEnoughToOpen()===!1?(this.log("It is not big enough to be considered as open!"),!1):(this.opened=!0,void this.onOpen())},this.onOpen=function(){this.listenForSeen()},this.onScroll=function(){this.listenForSeen()},this.close=function(){},this.maximize=function(){},this.minimize=function(){},this.attachBindings=function(){},this.adjustSeenPeriod=function(){this.seenPeriod=3e3},this},d=function(){return this.opened=!1,this.name="Horizontal Widget (instance)",this.seen=!1,this.widgetID=0,this.delay=0,this.placeholder=null,this.el={},this.articleAmount=0,this.articleStack="horizontal",this.articles=null,this.creativeIds=[],this.seenPeriod=0,this.hasImage=!1,this.dimensions={height:70,width:200},this.detailsExists=function(){return!0},this.bindPlaceholder=function(a){this.placeholder=a},this.bindWidgetID=function(){this.widgetID=limk.key.applicationKey.horizontal},this.bindArticleAmount=function(){this.articleAmount=limk.settings.widgets.horizontal.articleAmount},this.takeArticles=function(){this.articles=limk.API.collection.take(this.articleStack,this.articleAmount)},this.prepareEl=function(){this.el.container=this.placeholder.find(".limk-horizontal-widget"),this.el.header=this.placeholder.find(".limk-horizontal-widget .limk-header"),this.el.content=this.placeholder.find(".limk-horizontal-widget .limk-content")},this.prepareHTML=function(){this.log("Preparing."),this.generatedHtml=limk.jQuery("<div/>",{"class":"limk-widget limk-horizontal-widget"}).attr("data-limk-widget-id",this.widgetID).append(function(){return limk.settings.widgets.horizontal.headline.length>0?limk.jQuery("<div/>",{"class":"limk-header"}).append(limk.jQuery("<span/>",{text:limk.settings.widgets.horizontal.headline})):limk.jQuery("<div/>",{"class":"limk-header no-headline"})}).append(limk.jQuery("<div/>",{"class":"limk-content"}).append(limk.jQuery("<ul/>",{"class":"limk-items"})).append(this.getLogoModal()))},this.bindArticles=function(){var a=this;this.placeholder.append(this.generatedHtml),limk.jQuery.each(this.articles,function(b,c){c.hasImage()===!0?(a.hasImage=!0,limk.jQuery(a.placeholder.find(".limk-horizontal-widget .limk-items")).append(limk.jQuery("<li/>",{"class":"contains-"+limk.settings.widgets.horizontal.articlePerLine}).append(limk.jQuery("<a/>",{"class":"limk-article",href:c.url,rel:c.isSponsored()?"nofollow":"follow"}).attr("data-id",c.id).attr("data-token",c.token).attr("data-fp",c.fingerprint).attr("data-type",c.isSponsored()?"sponsored":"internal").append(limk.jQuery("<div/>",{"class":"image-container"}).append(limk.jQuery("<img/>",{"class":"limk-article-image scale",src:null}).attr("data-scale","best-fill").attr("data-align","center")).append(function(){return c.hasVideo()===!0?limk.jQuery("<img/>",{"class":"video-overlay",src:limk.environment.cdnUrl()+"assets/shared/img/play-button-sm.png"}):void 0})).append(limk.jQuery("<span/>",{"class":"limk-article-title",text:c.title})).append(limk.jQuery("<span/>",{"class":"limk-article-brand",text:c.isSponsored()?c.brand:""}))))):limk.jQuery(a.placeholder.find(".limk-horizontal-widget .limk-items")).append(limk.jQuery("<li/>",{"class":"contains-"+limk.settings.widgets.horizontal.articlePerLine}).addClass("no-image").append(limk.jQuery("<a/>",{"class":"limk-article",href:c.url,rel:c.isSponsored()?"nofollow":"follow"}).attr("data-id",c.id).attr("data-token",c.token).attr("data-fp",c.fingerprint).attr("data-type",c.isSponsored()?"sponsored":"internal").append(limk.jQuery("<span/>",{"class":"limk-article-title",text:c.title})).append(limk.jQuery("<span/>",{"class":"limk-article-brand",text:c.isSponsored()?c.brand:""}))))}),this.resizeRecommendations()},this.resizeRecommendations=function(){var a=this;this.hasImage===!0&&(limk.jQuery(".limk-horizontal-widget .limk-items").addClass("has-image"),this.placeholder.find(".limk-article").each(function(b,c){var d=limk.jQuery(c).find(".image-container");if(0!==d.length){var e=d.height(),f=d.width();limk.jQuery(c).find("img.limk-article-image").attr("src",a.articles[b].getImage(e,f))}}))},this.enablePlugins=function(){},this.attempt=function(){this.open()},this.open=function(){return this.isPlaceholderBigEnoughToOpen()===!1?(this.log("It is not big enough to be considered as open!"),!1):(this.opened=!0,void this.onOpen())},this.onOpen=function(){this.listenForSeen()},this.onScroll=function(){this.listenForSeen()},this.close=function(){},this.maximize=function(){},this.minimize=function(){},this.attachBindings=function(){},this.adjustSeenPeriod=function(){this.seenPeriod=3e3},this},e=function(){return this.opened=!1,this.name="Custom Widget (instance)",this.seen=!1,this.widgetID=0,this.delay=0,this.placeholder=null,this.el={},this.articleAmount=0,this.articleStack="custom",this.articles=null,this.creativeIds=[],this.seenPeriod=0,this.triggerType=0,this.hasImage=!1,this.dimensions={height:100,width:100},this.detailsExists=function(){return limk.settings.customWidgetInfoExists(this.widgetID)},this.bindPlaceholder=function(a){this.placeholder=a},this.bindWidgetID=function(){this.widgetID=limk.jQuery(this.placeholder).data("widget-id")},this.bindTrigger=function(){this.triggerType=parseInt(limk.jQuery(this.placeholder).data("trigger-type"),10)},this.bindArticleAmount=function(){this.articleAmount=limk.settings.widgets.custom[this.widgetID].custom_article_amount},this.takeArticles=function(){this.articles=limk.API.collection.take(this.articleStack,this.articleAmount)},this.prepareEl=function(){this.el.container=this.placeholder.find(".limk-custom-widget"),this.el.header=this.placeholder.find(".limk-custom-widget .limk-header"),this.el.content=this.placeholder.find(".limk-custom-widget .limk-content")},this.prepareHTML=function(){var a=this;this.log("Preparing.");var b=limk.jQuery("<div/>",{"class":"limk-widget limk-custom-widget","data-limk-widget-id":this.widgetID}).append(function(){return 0===a.triggerType?limk.jQuery("<div/>",{"class":"limk-header"}).append(limk.jQuery("<span/>",{text:limk.settings.widgets.custom[a.widgetID].custom_headline})):limk.jQuery("<div/>",{"class":"limk-header no-headline"})}).append(limk.jQuery("<div/>",{"class":"limk-content"}).append(limk.jQuery("<ul/>",{"class":"limk-items"})));return 0===this.triggerType?void(this.generatedHtml=b):void(1===this.triggerType&&(this.generatedHtml=limk.jQuery("<div/>",{id:"limk-exit-intent-modal"}).append(limk.jQuery("<div/>",{"class":"limk-underlay"})).append(limk.jQuery("<div/>",{"class":"limk-modal"}).append(limk.jQuery("<div/>",{"class":"limk-modal-title"}).append(limk.jQuery("<h3/>").text(limk.settings.widgets.custom[this.widgetID].custom_headline)).append(limk.jQuery("<img/>",{src:limk.environment.cdnUrl()+"assets/shared/img/close.png","class":"limk-exit-intent-close"}))).append(limk.jQuery("<div/>",{"class":"limk-modal-body"}).append(b)))))},this.bindArticles=function(){var a=this;this.placeholder.append(this.generatedHtml),limk.jQuery.each(this.articles,function(b,c){c.hasImage()===!0?(a.hasImage=!0,limk.jQuery(a.placeholder.find(".limk-custom-widget .limk-items")).append(function(){return limk.jQuery("<li/>",{"class":"contains-"+limk.settings.widgets.custom[a.widgetID].custom_article_per_line}).append(limk.jQuery("<a/>",{"class":"limk-article",href:c.url,rel:c.isSponsored()?"nofollow":"follow"}).attr("data-id",c.id).attr("data-token",c.token).attr("data-fp",c.fingerprint).attr("data-type",c.isSponsored()?"sponsored":"internal").append(limk.jQuery("<div/>",{"class":"image-container"}).append(limk.jQuery("<img/>",{"class":"limk-article-image scale",src:null}).attr("data-scale","best-fill").attr("data-align","center")).append(function(){return c.hasVideo()===!0?limk.jQuery("<img/>",{"class":"video-overlay",src:limk.environment.cdnUrl()+"assets/shared/img/play-button-sm.png"}):void 0})).append(limk.jQuery("<span/>",{"class":"limk-article-title",text:c.title})).append(limk.jQuery("<span/>",{"class":"limk-article-brand",text:c.isSponsored()?c.brand:""})))})):limk.jQuery(a.placeholder.find(".limk-custom-widget .limk-items")).append(function(){return limk.jQuery("<li/>",{"class":"contains-"+limk.settings.widgets.custom[a.widgetID].custom_article_per_line}).addClass("no-image").append(limk.jQuery("<a/>",{"class":"limk-article",href:c.url,rel:c.isSponsored()?"nofollow":"follow"}).attr("data-id",c.id).attr("data-token",c.token).attr("data-fp",c.fingerprint).attr("data-type",c.isSponsored()?"sponsored":"internal").append(limk.jQuery("<span/>",{"class":"limk-article-title",text:c.title})).append(limk.jQuery("<span/>",{"class":"limk-article-brand",text:c.isSponsored()?c.brand:""})))})})},this.resizeRecommendations=function(){var a=this;this.hasImage===!0&&(limk.jQuery(".limk-custom-widget .limk-items").addClass("has-image"),this.placeholder.find(".limk-article").each(function(b,c){var d=limk.jQuery(c).find(".image-container");if(0!==d.length){var e=d.height(),f=d.width();limk.jQuery(c).find("img.limk-article-image").attr("src",a.articles[b].getImage(e,f))}}))},this.enablePlugins=function(){},this.attempt=function(){},this.open=function(){var a=this;setTimeout(function(){return a.isPlaceholderBigEnoughToOpen()===!1?(a.log("It is not big enough to be considered as open!"),!1):(a.opened=!0,void a.onOpen())},500)},this.onOpen=function(){this.listenForSeen()},this.onScroll=function(){},this.close=function(){},this.maximize=function(){},this.minimize=function(){},this.attachBindings=function(){var a=this;1===this.triggerType&&(ouibounce(limk.jQuery("#limk-exit-intent-modal")[0],{aggressive:!0,timer:0,callback:function(){a.log("Exit-Intent triggered."),a.resizeRecommendations(),limk.cache.setExitIntentCooldownTimestamp(),a.open()}}),limk.jQuery("body").on("click","#limk-exit-intent-modal .limk-underlay",function(){limk.jQuery("#limk-exit-intent-modal").hide()}),limk.jQuery("body").on("click","#limk-exit-intent-modal .limk-exit-intent-close",function(){limk.jQuery("#limk-exit-intent-modal").hide()})),0===this.triggerType&&(this.resizeRecommendations(),this.open())},this.adjustSeenPeriod=function(){0===this.triggerType&&(this.seenPeriod=3e3),1===this.triggerType&&(this.seenPeriod=1500)},this},f=function h(){if(this.constructor===h)throw new Error("Can not instantiate an abstract class!")};f.prototype.json=limk.API.jsonCode,f.prototype.generatedHtml=null,f.prototype.log=function(a){limk.logger.log("[Widget]["+this.name+"] "+a)},f.prototype.isPlaceholderBigEnoughToOpen=function(){var a=this.el.container.width(),b=this.el.container.height();return this.log("Height: "+b+"/"+this.dimensions.height+" Width: "+a+"/"+this.dimensions.width),a>=this.dimensions.width==!0&&b>=this.dimensions.height==!0},f.prototype.getLogoModal=function(){return function(){var a=limk.environment.apiUrl()+limk.API.version+"/about?utm_source=limk-widget&utm_medium="+limk.key.siteID;return limk.API.collection.hasSponsoredContent===!1?limk.jQuery("<a/>",{href:"https://limk.com/?utm_term="+document.domain,target:"_blank"}).append(limk.jQuery("<img/>",{"class":"limk-logo",src:limk.environment.cdnUrl()+"assets/shared/img/logo-widget.png"})):limk.dom.renderedInIframe()===!0?limk.jQuery("<a/>",{href:a,target:"_blank"}).append(limk.jQuery("<img/>",{"class":"limk-logo",src:limk.environment.cdnUrl()+"assets/shared/img/logo-widget.png"})):limk.device.isMobileOrTablet()===!0?limk.jQuery("<a/>",{href:a,target:"_blank"}).append(limk.jQuery("<img/>",{"class":"limk-logo",src:limk.environment.cdnUrl()+"assets/shared/img/logo-widget.png"})):limk.jQuery("<a/>",{href:"#",target:"_blank"}).append(limk.jQuery("<img/>",{"class":"limk-logo",src:limk.environment.cdnUrl()+"assets/shared/img/logo-widget.png"})).featherlight({type:"html",targetAttr:a,beforeOpen:function(){limk.jQuery(".featherlight-content").html(limk.jQuery("<iframe/>",{src:a,scrolling:"no",frameborder:0,allowtransparency:!0}).css("width","500px").css("height","390px")).hide()},afterOpen:function(){limk.jQuery(".featherlight-content").show()}})}},f.prototype.setCreativeIds=function(){var a=this;limk.jQuery.each(this.articles,function(b,c){c.is("creative")===!0&&a.creativeIds.push(c.getId())})},f.prototype.isOpened=function(){return this.opened===!0},f.prototype.isSeen=function(){return this.seen===!0},f.prototype.onSeen=function(){var a=this;limk.jQuery.ajax({url:limk.environment.apiUrl()+limk.API.version+"/widget/seen",type:"GET",contentType:"application/json",data:{widgetID:this.widgetID,siteID:limk.key.siteID,domain:document.domain,creativeIds:this.creativeIds},jsonp:"callback",dataType:"jsonp"}).done(function(b){"number"!=typeof b.errcode?a.log("Success: "+a.widgetID+" successfully seen!"):a.log("Fail: "+b.message)})},f.prototype.listenForSeen=function(){this.isSeen()!==!0&&this.isOpened()!==!1&&this.isOnAwaitingPeriod()!==!0&&limk.dom.isElementInViewport(this.el.container)!==!1&&(this.log("Entered the viewport."),this.log("It is waiting "+this.seenPeriod+" miliseconds to check again."),this.enteredViewport())},f.prototype.isOnAwaitingPeriod=function(){return 0!==this.enteredViewportAt},f.prototype.enteredViewport=function(){this.isSeen()!==!0&&this.isOnAwaitingPeriod()===!1&&(this.enteredViewportAt=limk.time.getTimestamp(),setTimeout(function(){limk.dom.isElementInViewport(this.el.container)===!0?(this.seen=!0,this.onSeen(),this.log("Stayed alive for "+this.seenPeriod+" miliseconds and seen.")):(this.log("Could not stay alive on screen for "+this.seenPeriod+" miliseconds."),this.enteredViewportAt=0)}.bind(this),this.seenPeriod))},f.prototype.initialize=function(){return this.enteredViewportAt=0,this.bindWidgetID(),this.detailsExists()===!0?(this.bindArticleAmount(),this.takeArticles(),this.setCreativeIds(),this.prepareHTML(),this.bindArticles(),this.enablePlugins(),this.prepareEl(),this.attachBindings(),this.adjustSeenPeriod(),!0):(this.log("Details is not found for this widget. Skipping."),!1)},b.prototype=Object.create(f.prototype),a.prototype=Object.create(f.prototype),c.prototype=Object.create(f.prototype),d.prototype=Object.create(f.prototype),e.prototype=Object.create(f.prototype);var g={widgets:[],loadWidget:function(a){this.widgets.push(a)}};limk.dom.isResponsiveWidgetLoaded()===!0&&(limk.device.isMobileOrTablet()===!0?g.loadWidget(new a):window.self!==window.top?limk.logger.log("[App] Running in iframed content - not opening the responsive widget."):g.loadWidget(new b)),limk.dom.isVerticalWidgetLoaded()===!0&&g.loadWidget(new c),limk.dom.getHorizontalWidgetAmount()>0&&limk.jQuery(".js-limk_horizontal_widget_placeholder").each(function(){var a=limk.jQuery(this),b=new d;b.bindPlaceholder(a),g.loadWidget(b)}),limk.dom.getCustomWidgetAmount()>0&&limk.jQuery(".js-limk_custom_widget_placeholder").each(function(){var a=limk.jQuery(this),b=new e;b.bindPlaceholder(a),b.bindTrigger(a),g.loadWidget(b)}),limk.jQuery.each(g.widgets,function(a,b){setTimeout(function(){var a=b.initialize();return a===!1?void b.log("Could not initialize. Skipping."):(!!limk.jQuery.prototype.imageScale==!0&&b.el.container.find("img.scale").imageScale(),void b.attempt())},b.delay)}),limk.jQuery("body").on("click",".limk-article",function(a){a.preventDefault();var b=limk.jQuery(this),c={article:b.data("id"),widgetID:parseInt(b.closest(".limk-widget").data("limk-widget-id"),10),siteID:limk.key.siteID,token:b.data("token"),fp:b.data("fp"),domain:document.domain,type:"internal"===b.data("type")?"internal":"sponsored",deviceInfo:limk.device.getDeviceInformation()},d=null;return"sponsored"===b.data("type")?(limk.logger.log("[EventListener] Opening sponsored content link in a blank page."),c.redir=b.attr("href"),d=limk.jQuery.param(c),void window.open(limk.environment.goUrl()+limk.API.version+"/article/click?"+d,"_blank")):void limk.jQuery.ajax({url:limk.environment.apiUrl()+limk.API.version+"/article/click",type:"GET",contentType:"application/json",data:c,jsonp:"callback",dataType:"jsonp"}).done(function(a){"number"!=typeof a.errcode?limk.logger.log("[EventListener] Success: click successful!"):limk.logger.log("[EventListener] Fail: "+a.message),"internal"===b.data("type")&&(window.location=b.attr("href"))})}),limk.jQuery(window).on("DOMContentLoaded load resize scroll",function(){limk.jQuery.each(g.widgets,function(a,b){b.onScroll()})})}();